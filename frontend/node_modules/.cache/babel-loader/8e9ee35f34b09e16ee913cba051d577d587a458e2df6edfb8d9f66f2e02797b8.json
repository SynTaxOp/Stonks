{"ast":null,"code":"import _objectSpread from\"/Users/srejanbera/Workspace/Stonks/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{ArrowLeft,Plus,Calendar,TrendingUp,Coins,PieChart,Layers,Shield,Activity,BarChart3,Zap,RefreshCw,Edit3,Save,X}from'lucide-react';import{userFundAPI,transactionAPI}from'../../services/api.js';import HistoricDataModal from'./HistoricDataModal.jsx';import NavHistoryModal from'./NavHistoryModal.jsx';import LoadingSpinner from'../common/LoadingSpinner.jsx';import ErrorMessage from'../common/ErrorMessage.jsx';import TransactionForm from'./TransactionForm.jsx';import SIPForm from'./SIPForm.jsx';import BulkTransactionForm from'./BulkTransactionForm.jsx';import UnitsRow from'../common/UnitsRow.jsx';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const UserFundDetail=_ref=>{var _transactionToDelete$;let{fund,userId,onBack,onRecordTransaction,onRegisterSIP}=_ref;const[fundDetails,setFundDetails]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[showTransactionForm,setShowTransactionForm]=useState(false);const[showBulkTransactionForm,setShowBulkTransactionForm]=useState(false);const[showSIPForm,setShowSIPForm]=useState(false);const[successMessage,setSuccessMessage]=useState('');const[refreshing,setRefreshing]=useState(false);const[showDeleteDialog,setShowDeleteDialog]=useState(false);const[transactionToDelete,setTransactionToDelete]=useState(null);const[isDeleting,setIsDeleting]=useState(false);const[dialogError,setDialogError]=useState(null);const[isEditingTag,setIsEditingTag]=useState(false);const[tagValue,setTagValue]=useState('');const[isEditingBenchmark,setIsEditingBenchmark]=useState(false);const[benchmarkValue,setBenchmarkValue]=useState('');const[benchmarkEnums,setBenchmarkEnums]=useState([]);const[isUpdating,setIsUpdating]=useState(false);const[showHistoricDataModal,setShowHistoricDataModal]=useState(false);const[showPerformanceModal,setShowPerformanceModal]=useState(false);const loadFundDetails=useCallback(async()=>{try{setLoading(true);setError(null);// Load benchmark enums and fund details in parallel\nconst[response,enums]=await Promise.all([userFundAPI.getUserFundDetails(userId,fund.schemeCode),userFundAPI.getBenchmarkEnums()]);console.log('Fund Details Response:',response);if(response){setFundDetails(response);}else{setError('Failed to load fund details');}setBenchmarkEnums(enums||[]);}catch(err){console.error('Error loading fund details:',err);setError('Failed to load fund details. Please try again.');}finally{setLoading(false);}},[userId,fund.schemeCode]);useEffect(()=>{if(fund&&userId){loadFundDetails();}},[fund,userId,loadFundDetails]);const handleRefresh=async()=>{setRefreshing(true);await loadFundDetails();setRefreshing(false);};const formatCurrency=amount=>{return new Intl.NumberFormat('en-IN',{style:'currency',currency:'INR',minimumFractionDigits:2}).format(amount||0);};const formatDate=dateString=>{if(!dateString)return'Invalid Date';try{// Handle string format \"dd-MM-yyyy\"\nif(typeof dateString==='string'){// Parse the dd-MM-yyyy format\nconst parts=dateString.split('-');if(parts.length===3){const day=parts[0];const month=parts[1];const year=parts[2];// Create date object (month is 0-indexed in JavaScript)\nconst date=new Date(year,month-1,day);// Check if date is valid\nif(isNaN(date.getTime())){return'Invalid Date';}return date.toLocaleDateString('en-IN',{year:'numeric',month:'short',day:'numeric'});}}// Fallback for timestamp format (if needed)\nlet date;if(typeof dateString==='number'){if(dateString>10000000000){// Timestamp is in milliseconds\ndate=new Date(dateString);}else{// Timestamp is in seconds\ndate=new Date(dateString*1000);}}else{date=new Date(dateString);}// Check if date is valid\nif(isNaN(date.getTime())){return'Invalid Date';}return date.toLocaleDateString('en-IN',{year:'numeric',month:'short',day:'numeric'});}catch(error){console.error('Error formatting date:',error);return'Invalid Date';}};const formatPercentage=value=>{if(value==null||isNaN(value)){return'N/A';}return\"\".concat(value.toFixed(2),\"%\");};const handleSuccess=message=>{setSuccessMessage(message);// Reload fund details to show updated data\nloadFundDetails();// Clear success message after 3 seconds\nsetTimeout(()=>setSuccessMessage(''),3000);};const handleDeleteTransaction=unit=>{if(!unit.transactionId){setError('Cannot delete transaction: No transaction ID found');return;}setTransactionToDelete(unit);setDialogError(null);setShowDeleteDialog(true);};const confirmDeleteTransaction=async()=>{if(!transactionToDelete)return;try{setIsDeleting(true);setDialogError(null);setError(null);await transactionAPI.deleteTransaction(transactionToDelete.transactionId);setSuccessMessage('Transaction deleted successfully');// Reload fund details to show updated data\nawait loadFundDetails();// Clear success message after 5 seconds\nsetTimeout(()=>setSuccessMessage(''),5000);// Close dialog on success\nsetShowDeleteDialog(false);setTransactionToDelete(null);}catch(err){var _err$response,_err$response$data;console.error('Error deleting transaction:',err);// Extract error message from API response\nlet errorMessage='Please try again.';if((_err$response=err.response)!==null&&_err$response!==void 0&&(_err$response$data=_err$response.data)!==null&&_err$response$data!==void 0&&_err$response$data.message){// API returned a structured error response\nerrorMessage=err.response.data.message;}else if(err.message){// Generic error message\nerrorMessage=err.message;}else if(typeof err==='string'){// String error\nerrorMessage=err;}setDialogError(errorMessage);}finally{setIsDeleting(false);}};const cancelDeleteTransaction=()=>{setShowDeleteDialog(false);setTransactionToDelete(null);setIsDeleting(false);setDialogError(null);};const handleEmergencyToggle=async()=>{if(!(fundDetails!==null&&fundDetails!==void 0&&fundDetails.userFundDTO))return;try{setIsUpdating(true);const currentEmergencyStatus=fundDetails.userFundDTO.isEmergency;const updateData={userId:userId,fundId:fund.schemeCode,fundName:fund.schemeName,isEmergency:!currentEmergencyStatus,tag:fundDetails.userFundDTO.tag||'',benchmark:fundDetails.userFundDTO.benchmark||null};await userFundAPI.updateUserFund(userId,fund.schemeCode,updateData);// Update local state instead of reloading\nsetFundDetails(prev=>_objectSpread(_objectSpread({},prev),{},{userFundDTO:_objectSpread(_objectSpread({},prev.userFundDTO),{},{isEmergency:!currentEmergencyStatus})}));setSuccessMessage(\"Fund \".concat(!currentEmergencyStatus?'marked as':'removed from',\" emergency fund\"));setTimeout(()=>setSuccessMessage(''),5000);}catch(error){console.error('Error updating emergency status:',error);setError('Failed to update emergency status. Please try again.');}finally{setIsUpdating(false);}};const handleTagEdit=()=>{var _fundDetails$userFund;setTagValue((fundDetails===null||fundDetails===void 0?void 0:(_fundDetails$userFund=fundDetails.userFundDTO)===null||_fundDetails$userFund===void 0?void 0:_fundDetails$userFund.tag)||'');setIsEditingTag(true);};const handleTagSave=async()=>{if(!(fundDetails!==null&&fundDetails!==void 0&&fundDetails.userFundDTO))return;try{setIsUpdating(true);const updateData={userId:userId,fundId:fund.schemeCode,fundName:fund.schemeName,isEmergency:fundDetails.userFundDTO.isEmergency,tag:tagValue.trim(),benchmark:fundDetails.userFundDTO.benchmark||null};await userFundAPI.updateUserFund(userId,fund.schemeCode,updateData);// Update local state instead of reloading\nsetFundDetails(prev=>_objectSpread(_objectSpread({},prev),{},{userFundDTO:_objectSpread(_objectSpread({},prev.userFundDTO),{},{tag:tagValue.trim()})}));setSuccessMessage('Tag updated successfully');setIsEditingTag(false);setTimeout(()=>setSuccessMessage(''),5000);}catch(error){console.error('Error updating tag:',error);setError('Failed to update tag. Please try again.');}finally{setIsUpdating(false);}};const handleTagCancel=()=>{setIsEditingTag(false);setTagValue('');};const handleBenchmarkEdit=()=>{setBenchmarkValue((userFundDTO===null||userFundDTO===void 0?void 0:userFundDTO.benchmark)||'');setIsEditingBenchmark(true);};const handleBenchmarkSave=async()=>{if(!(fundDetails!==null&&fundDetails!==void 0&&fundDetails.userFundDTO))return;// Validate benchmark value\nif(benchmarkValue&&!benchmarkEnums.includes(benchmarkValue)){setError('Invalid benchmark value. Please select a valid option.');return;}try{setIsUpdating(true);const updateData={userId:userId,fundId:fund.schemeCode,fundName:fund.schemeName,isEmergency:fundDetails.userFundDTO.isEmergency,tag:fundDetails.userFundDTO.tag||'',benchmark:benchmarkValue||null};await userFundAPI.updateUserFund(userId,fund.schemeCode,updateData);// Update local state instead of reloading\nsetFundDetails(prev=>_objectSpread(_objectSpread({},prev),{},{userFundDTO:_objectSpread(_objectSpread({},prev.userFundDTO),{},{benchmark:benchmarkValue||null})}));setSuccessMessage('Benchmark updated successfully');setIsEditingBenchmark(false);setTimeout(()=>setSuccessMessage(''),5000);}catch(error){console.error('Error updating benchmark:',error);setError('Failed to update benchmark. Please try again.');}finally{setIsUpdating(false);}};const handleBenchmarkCancel=()=>{setIsEditingBenchmark(false);setBenchmarkValue('');};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(LoadingSpinner,{}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-sm text-gray-500\",children:\"Loading fund details...\"})]})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center max-w-md w-full\",children:[/*#__PURE__*/_jsx(ErrorMessage,{message:error,onClose:()=>setError(null)}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.preventDefault();onBack();},type:\"button\",className:\"mt-6 px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors\",children:\"Go Back to Dashboard\"})]})});}if(!fundDetails){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center max-w-md w-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-lg border border-gray-200 shadow-sm\",children:[/*#__PURE__*/_jsx(PieChart,{className:\"w-12 h-12 text-gray-300 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mb-6\",children:\"No fund details found\"}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.preventDefault();onBack();},type:\"button\",className:\"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors\",children:\"Go Back to Dashboard\"})]})})});}const{userFundDTO,summary,extraSummary,units,registeredSIPs}=fundDetails;return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow-sm border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-8 py-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:e=>{e.preventDefault();onBack();},type:\"button\",className:\"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"h-5 w-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"Back to Dashboard\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleRefresh,disabled:refreshing,className:\"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50\",children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"h-4 w-4 \".concat(refreshing?'animate-spin':'')}),/*#__PURE__*/_jsx(\"span\",{children:refreshing?'Refreshing...':'Refresh'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl lg:text-3xl font-bold text-gray-900 mb-3\",children:fund.schemeName}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center gap-4\",children:[(fundDetails===null||fundDetails===void 0?void 0:fundDetails.latestNav)&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:\"NAV:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-semibold text-gray-900\",children:[\"\\u20B9\",fundDetails.latestNav.toFixed(2)]})]}),(fundDetails===null||fundDetails===void 0?void 0:fundDetails.latestNavDate)&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:\"Date:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:formatDate(fundDetails.latestNavDate)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowTransactionForm(true),className:\"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors\",children:[/*#__PURE__*/_jsx(Plus,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Add Transaction\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sm:hidden\",children:\"Add\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowBulkTransactionForm(true),className:\"flex items-center space-x-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white text-sm font-medium rounded-lg transition-colors\",children:[/*#__PURE__*/_jsx(Layers,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Bulk Add\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sm:hidden\",children:\"Bulk\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowSIPForm(true),className:\"flex items-center space-x-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium rounded-lg transition-colors\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Register SIP\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sm:hidden\",children:\"SIP\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowHistoricDataModal(true),className:\"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white text-sm font-medium rounded-lg transition-all duration-200 shadow-md hover:shadow-lg\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"NAV History\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sm:hidden\",children:\"NAV\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowPerformanceModal(true),className:\"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white text-sm font-medium rounded-lg transition-all duration-200 shadow-md hover:shadow-lg\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Performance\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sm:hidden\",children:\"Perf\"})]})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-8 py-8\",children:[successMessage&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-green-800\",children:successMessage}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSuccessMessage(''),className:\"text-green-600 hover:text-green-800\",children:/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-red-800\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setError(null),className:\"text-red-600 hover:text-red-800\",children:/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-6 rounded-lg border border-gray-200 shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-blue-50 rounded-lg\",children:/*#__PURE__*/_jsx(Coins,{className:\"h-5 w-5 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mb-1\",children:\"Total Invested\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold text-gray-900\",children:formatCurrency(summary===null||summary===void 0?void 0:summary.totalInvested)})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-6 rounded-lg border border-gray-200 shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-green-50 rounded-lg\",children:/*#__PURE__*/_jsx(TrendingUp,{className:\"h-5 w-5 text-green-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mb-1\",children:\"Current Value\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold text-gray-900\",children:formatCurrency(summary===null||summary===void 0?void 0:summary.totalValue)})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-6 rounded-lg border border-gray-200 shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-lg \".concat(((summary===null||summary===void 0?void 0:summary.profitLoss)||0)>=0?'bg-green-50':'bg-red-50'),children:/*#__PURE__*/_jsx(PieChart,{className:\"h-5 w-5 \".concat(((summary===null||summary===void 0?void 0:summary.profitLoss)||0)>=0?'text-green-600':'text-red-600')})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mb-1\",children:\"Profit/Loss\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold \".concat(((summary===null||summary===void 0?void 0:summary.profitLoss)||0)>=0?'text-green-600':'text-red-600'),children:formatCurrency(summary===null||summary===void 0?void 0:summary.profitLoss)}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-medium \".concat(((summary===null||summary===void 0?void 0:summary.profitLossPercent)||0)>=0?'text-green-600':'text-red-600'),children:formatPercentage(summary===null||summary===void 0?void 0:summary.profitLossPercent)})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-6 rounded-lg border border-gray-200 shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-purple-50 rounded-lg\",children:/*#__PURE__*/_jsx(Activity,{className:\"h-5 w-5 text-purple-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mb-1\",children:\"XIRR\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold text-gray-900\",children:formatPercentage(extraSummary===null||extraSummary===void 0?void 0:extraSummary.xirr)})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-6 rounded-lg border border-gray-200 shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-indigo-50 rounded-lg\",children:/*#__PURE__*/_jsx(TrendingUp,{className:\"h-5 w-5 text-indigo-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mb-1\",children:\"Long Term Gains\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold text-gray-900\",children:formatCurrency(extraSummary===null||extraSummary===void 0?void 0:extraSummary.longTermGains)})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg border border-gray-200 shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Fund Information\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between py-3 border-b border-gray-100\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:\"Fund Name\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900\",children:userFundDTO===null||userFundDTO===void 0?void 0:userFundDTO.fundName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between py-3 border-b border-gray-100\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:\"Tag\"}),isEditingTag?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:tagValue,onChange:e=>setTagValue(e.target.value),className:\"px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Enter tag\",maxLength:50}),/*#__PURE__*/_jsx(\"button\",{onClick:handleTagSave,disabled:isUpdating,className:\"p-1.5 text-green-600 hover:text-green-700 disabled:opacity-50\",children:/*#__PURE__*/_jsx(Save,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleTagCancel,disabled:isUpdating,className:\"p-1.5 text-gray-500 hover:text-gray-700 disabled:opacity-50\",children:/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900\",children:(userFundDTO===null||userFundDTO===void 0?void 0:userFundDTO.tag)||'No tag'}),/*#__PURE__*/_jsx(\"button\",{onClick:handleTagEdit,disabled:isUpdating,className:\"p-1 text-blue-600 hover:text-blue-700 disabled:opacity-50\",children:/*#__PURE__*/_jsx(Edit3,{className:\"h-4 w-4\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between py-3 border-b border-gray-100\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:\"Benchmark\"}),isEditingBenchmark?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"select\",{value:benchmarkValue,onChange:e=>setBenchmarkValue(e.target.value),className:\"px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Not Set\"}),benchmarkEnums.map((benchmark,index)=>/*#__PURE__*/_jsx(\"option\",{value:benchmark,children:benchmark},index))]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleBenchmarkSave,disabled:isUpdating,className:\"p-1.5 text-green-600 hover:text-green-700 disabled:opacity-50\",children:/*#__PURE__*/_jsx(Save,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleBenchmarkCancel,disabled:isUpdating,className:\"p-1.5 text-gray-500 hover:text-gray-700 disabled:opacity-50\",children:/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900\",children:(userFundDTO===null||userFundDTO===void 0?void 0:userFundDTO.benchmark)||'Not Set'}),/*#__PURE__*/_jsx(\"button\",{onClick:handleBenchmarkEdit,disabled:isUpdating,className:\"p-1 text-blue-600 hover:text-blue-700 disabled:opacity-50\",children:/*#__PURE__*/_jsx(Edit3,{className:\"h-4 w-4\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between py-3 border-b border-gray-100\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:\"Emergency Fund\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium flex items-center \".concat(userFundDTO!==null&&userFundDTO!==void 0&&userFundDTO.isEmergency?'text-red-600':'text-green-600'),children:userFundDTO!==null&&userFundDTO!==void 0&&userFundDTO.isEmergency?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Shield,{className:\"w-4 h-4 mr-1\"}),\"Yes\"]}):'No'}),/*#__PURE__*/_jsx(\"button\",{onClick:handleEmergencyToggle,disabled:isUpdating,className:\"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 \".concat(userFundDTO!==null&&userFundDTO!==void 0&&userFundDTO.isEmergency?'bg-red-600':'bg-gray-300'),children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-block h-4 w-4 transform rounded-full bg-white transition-transform \".concat(userFundDTO!==null&&userFundDTO!==void 0&&userFundDTO.isEmergency?'translate-x-6':'translate-x-1')})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between py-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:\"Total Units\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-gray-900\",children:(summary===null||summary===void 0?void 0:summary.totalUnits)!=null?summary.totalUnits.toFixed(4):'0.0000'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg border border-gray-200 shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Registered SIPs\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:registeredSIPs&&registeredSIPs.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:registeredSIPs.map((sip,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-purple-50 rounded-lg border border-purple-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold text-gray-900 mb-1\",children:sip.fundName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Monthly SIP\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold text-gray-900\",children:formatCurrency(sip.amount)}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"per month\"})]})]})},sip.id||index))}):/*#__PURE__*/_jsxs(\"div\",{className:\"py-12 text-center\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"h-12 w-12 text-gray-300 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mb-2\",children:\"No SIPs registered\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400\",children:\"Click \\\"Register SIP\\\" to set up a new SIP\"})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Units History\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 text-xs text-gray-500\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2.5 h-2.5 bg-green-500 rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Active\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2.5 h-2.5 bg-gray-500 rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Sold\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2.5 h-2.5 bg-red-500 rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{children:\"SELL\"})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:units&&units.length>0?/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"Units\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"P&L\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"P&L %\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-100\",children:units.map((unit,index)=>/*#__PURE__*/_jsx(UnitsRow,{unit:unit,index:index,formatCurrency:formatCurrency,formatDate:formatDate,formatPercentage:formatPercentage,onDelete:handleDeleteTransaction},index))})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-16\",children:[/*#__PURE__*/_jsx(PieChart,{className:\"h-12 w-12 text-gray-300 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mb-2\",children:\"No units history available\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400\",children:\"Record transactions to see units history\"})]})})]})]}),/*#__PURE__*/_jsx(TransactionForm,{isOpen:showTransactionForm,onClose:()=>setShowTransactionForm(false),fund:fund,userId:userId,onSuccess:handleSuccess}),/*#__PURE__*/_jsx(BulkTransactionForm,{isOpen:showBulkTransactionForm,onClose:()=>setShowBulkTransactionForm(false),fund:fund,userId:userId,onSuccess:handleSuccess}),/*#__PURE__*/_jsx(SIPForm,{isOpen:showSIPForm,onClose:()=>setShowSIPForm(false),fund:fund,userId:userId,onSuccess:handleSuccess}),showDeleteDialog&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-xl w-full max-w-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-red-50 rounded-full\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-6 w-6 text-red-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"})})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900 text-center mb-4\",children:\"Delete Transaction\"}),transactionToDelete&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 text-center mb-4\",children:\"Are you sure you want to delete this transaction?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg space-y-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Date:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:formatDate(transactionToDelete.date)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Amount:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:formatCurrency(transactionToDelete.amount)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Units:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:((_transactionToDelete$=transactionToDelete.units)===null||_transactionToDelete$===void 0?void 0:_transactionToDelete$.toFixed(4))||'0.0000'})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-red-600 text-center mt-4 font-medium\",children:\"This action cannot be undone.\"})]}),dialogError&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",clipRule:\"evenodd\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-800\",children:dialogError}),dialogError.includes('Redeemed Transaction')&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-red-600 mt-1\",children:\"Tip: Redeemed transactions cannot be deleted.\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setDialogError(null),className:\"text-red-600 hover:text-red-800\",children:/*#__PURE__*/_jsx(X,{className:\"h-4 w-4\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:cancelDeleteTransaction,disabled:isDeleting,className:\"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:confirmDeleteTransaction,disabled:isDeleting,className:\"flex-1 px-4 py-2.5 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center\",children:isDeleting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin -ml-1 mr-2 h-4 w-4\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),\"Deleting...\"]}):'Delete'})]})]})})}),showHistoricDataModal&&/*#__PURE__*/_jsx(NavHistoryModal,{userId:userId,fundId:fund.schemeCode||fund.fundId,title:\"NAV History - \".concat(fund.schemeName||fund.name),onClose:()=>setShowHistoricDataModal(false),fetchData:userFundAPI.getUserFundHistoricData}),showPerformanceModal&&/*#__PURE__*/_jsx(HistoricDataModal,{userId:userId,fundId:fund.schemeCode||fund.fundId,title:\"Performance Chart - \".concat(fund.schemeName||fund.name),onClose:()=>setShowPerformanceModal(false),fetchData:userFundAPI.getUserFundPerformanceData})]});};export default UserFundDetail;","map":{"version":3,"names":["React","useState","useEffect","useCallback","ArrowLeft","Plus","Calendar","TrendingUp","Coins","PieChart","Layers","Shield","Activity","BarChart3","Zap","RefreshCw","Edit3","Save","X","userFundAPI","transactionAPI","HistoricDataModal","NavHistoryModal","LoadingSpinner","ErrorMessage","TransactionForm","SIPForm","BulkTransactionForm","UnitsRow","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserFundDetail","_ref","_transactionToDelete$","fund","userId","onBack","onRecordTransaction","onRegisterSIP","fundDetails","setFundDetails","loading","setLoading","error","setError","showTransactionForm","setShowTransactionForm","showBulkTransactionForm","setShowBulkTransactionForm","showSIPForm","setShowSIPForm","successMessage","setSuccessMessage","refreshing","setRefreshing","showDeleteDialog","setShowDeleteDialog","transactionToDelete","setTransactionToDelete","isDeleting","setIsDeleting","dialogError","setDialogError","isEditingTag","setIsEditingTag","tagValue","setTagValue","isEditingBenchmark","setIsEditingBenchmark","benchmarkValue","setBenchmarkValue","benchmarkEnums","setBenchmarkEnums","isUpdating","setIsUpdating","showHistoricDataModal","setShowHistoricDataModal","showPerformanceModal","setShowPerformanceModal","loadFundDetails","response","enums","Promise","all","getUserFundDetails","schemeCode","getBenchmarkEnums","console","log","err","handleRefresh","formatCurrency","amount","Intl","NumberFormat","style","currency","minimumFractionDigits","format","formatDate","dateString","parts","split","length","day","month","year","date","Date","isNaN","getTime","toLocaleDateString","formatPercentage","value","concat","toFixed","handleSuccess","message","setTimeout","handleDeleteTransaction","unit","transactionId","confirmDeleteTransaction","deleteTransaction","_err$response","_err$response$data","errorMessage","data","cancelDeleteTransaction","handleEmergencyToggle","userFundDTO","currentEmergencyStatus","isEmergency","updateData","fundId","fundName","schemeName","tag","benchmark","updateUserFund","prev","_objectSpread","handleTagEdit","_fundDetails$userFund","handleTagSave","trim","handleTagCancel","handleBenchmarkEdit","handleBenchmarkSave","includes","handleBenchmarkCancel","className","children","onClose","onClick","e","preventDefault","type","summary","extraSummary","units","registeredSIPs","disabled","latestNav","latestNavDate","totalInvested","totalValue","profitLoss","profitLossPercent","xirr","longTermGains","onChange","target","placeholder","maxLength","map","index","totalUnits","sip","id","onDelete","isOpen","onSuccess","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","fillRule","clipRule","cx","cy","r","title","name","fetchData","getUserFundHistoricData","getUserFundPerformanceData"],"sources":["/Users/srejanbera/Workspace/Stonks/frontend/src/components/Dashboard/UserFundDetail.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { \n  ArrowLeft, \n  Plus, \n  Calendar, \n  TrendingUp, \n  Coins, \n  PieChart, \n  Layers,\n  Shield,\n  Activity,\n  BarChart3,\n  Zap,\n  RefreshCw,\n  Edit3,\n  Save,\n  X\n} from 'lucide-react';\nimport { userFundAPI, transactionAPI } from '../../services/api.js';\nimport HistoricDataModal from './HistoricDataModal.jsx';\nimport NavHistoryModal from './NavHistoryModal.jsx';\nimport LoadingSpinner from '../common/LoadingSpinner.jsx';\nimport ErrorMessage from '../common/ErrorMessage.jsx';\nimport TransactionForm from './TransactionForm.jsx';\nimport SIPForm from './SIPForm.jsx';\nimport BulkTransactionForm from './BulkTransactionForm.jsx';\nimport UnitsRow from '../common/UnitsRow.jsx';\n\nconst UserFundDetail = ({ fund, userId, onBack, onRecordTransaction, onRegisterSIP }) => {\n  const [fundDetails, setFundDetails] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [showTransactionForm, setShowTransactionForm] = useState(false);\n  const [showBulkTransactionForm, setShowBulkTransactionForm] = useState(false);\n  const [showSIPForm, setShowSIPForm] = useState(false);\n  const [successMessage, setSuccessMessage] = useState('');\n  const [refreshing, setRefreshing] = useState(false);\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false);\n  const [transactionToDelete, setTransactionToDelete] = useState(null);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [dialogError, setDialogError] = useState(null);\n  const [isEditingTag, setIsEditingTag] = useState(false);\n  const [tagValue, setTagValue] = useState('');\n  const [isEditingBenchmark, setIsEditingBenchmark] = useState(false);\n  const [benchmarkValue, setBenchmarkValue] = useState('');\n  const [benchmarkEnums, setBenchmarkEnums] = useState([]);\n  const [isUpdating, setIsUpdating] = useState(false);\n  const [showHistoricDataModal, setShowHistoricDataModal] = useState(false);\n  const [showPerformanceModal, setShowPerformanceModal] = useState(false);\n\n  const loadFundDetails = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      // Load benchmark enums and fund details in parallel\n      const [response, enums] = await Promise.all([\n        userFundAPI.getUserFundDetails(userId, fund.schemeCode),\n        userFundAPI.getBenchmarkEnums()\n      ]);\n      \n      console.log('Fund Details Response:', response);\n      \n      if (response) {\n        setFundDetails(response);\n      } else {\n        setError('Failed to load fund details');\n      }\n      \n      setBenchmarkEnums(enums || []);\n    } catch (err) {\n      console.error('Error loading fund details:', err);\n      setError('Failed to load fund details. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  }, [userId, fund.schemeCode]);\n\n  useEffect(() => {\n    if (fund && userId) {\n      loadFundDetails();\n    }\n  }, [fund, userId, loadFundDetails]);\n\n  const handleRefresh = async () => {\n    setRefreshing(true);\n    await loadFundDetails();\n    setRefreshing(false);\n  };\n\n  const formatCurrency = (amount) => {\n    return new Intl.NumberFormat('en-IN', {\n      style: 'currency',\n      currency: 'INR',\n      minimumFractionDigits: 2,\n    }).format(amount || 0);\n  };\n\n  const formatDate = (dateString) => {\n    if (!dateString) return 'Invalid Date';\n    \n    try {\n      // Handle string format \"dd-MM-yyyy\"\n      if (typeof dateString === 'string') {\n        // Parse the dd-MM-yyyy format\n        const parts = dateString.split('-');\n        if (parts.length === 3) {\n          const day = parts[0];\n          const month = parts[1];\n          const year = parts[2];\n          \n          // Create date object (month is 0-indexed in JavaScript)\n          const date = new Date(year, month - 1, day);\n          \n          // Check if date is valid\n          if (isNaN(date.getTime())) {\n            return 'Invalid Date';\n          }\n          \n          return date.toLocaleDateString('en-IN', {\n            year: 'numeric',\n            month: 'short',\n            day: 'numeric'\n          });\n        }\n      }\n      \n      // Fallback for timestamp format (if needed)\n      let date;\n      if (typeof dateString === 'number') {\n        if (dateString > 10000000000) {\n          // Timestamp is in milliseconds\n          date = new Date(dateString);\n        } else {\n          // Timestamp is in seconds\n          date = new Date(dateString * 1000);\n        }\n      } else {\n        date = new Date(dateString);\n      }\n      \n      // Check if date is valid\n      if (isNaN(date.getTime())) {\n        return 'Invalid Date';\n      }\n      \n      return date.toLocaleDateString('en-IN', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric'\n      });\n    } catch (error) {\n      console.error('Error formatting date:', error);\n      return 'Invalid Date';\n    }\n  };\n\n  const formatPercentage = (value) => {\n    if (value == null || isNaN(value)) {\n      return 'N/A';\n    }\n    return `${value.toFixed(2)}%`;\n  };\n\n  const handleSuccess = (message) => {\n    setSuccessMessage(message);\n    // Reload fund details to show updated data\n    loadFundDetails();\n    // Clear success message after 3 seconds\n    setTimeout(() => setSuccessMessage(''), 3000);\n  };\n\n  const handleDeleteTransaction = (unit) => {\n    if (!unit.transactionId) {\n      setError('Cannot delete transaction: No transaction ID found');\n      return;\n    }\n\n    setTransactionToDelete(unit);\n    setDialogError(null);\n    setShowDeleteDialog(true);\n  };\n\n  const confirmDeleteTransaction = async () => {\n    if (!transactionToDelete) return;\n\n    try {\n      setIsDeleting(true);\n      setDialogError(null);\n      setError(null);\n      await transactionAPI.deleteTransaction(transactionToDelete.transactionId);\n      setSuccessMessage('Transaction deleted successfully');\n      // Reload fund details to show updated data\n      await loadFundDetails();\n      // Clear success message after 5 seconds\n      setTimeout(() => setSuccessMessage(''), 5000);\n      // Close dialog on success\n      setShowDeleteDialog(false);\n      setTransactionToDelete(null);\n    } catch (err) {\n      console.error('Error deleting transaction:', err);\n      \n      // Extract error message from API response\n      let errorMessage = 'Please try again.';\n      \n      if (err.response?.data?.message) {\n        // API returned a structured error response\n        errorMessage = err.response.data.message;\n      } else if (err.message) {\n        // Generic error message\n        errorMessage = err.message;\n      } else if (typeof err === 'string') {\n        // String error\n        errorMessage = err;\n      }\n      \n      setDialogError(errorMessage);\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n\n  const cancelDeleteTransaction = () => {\n    setShowDeleteDialog(false);\n    setTransactionToDelete(null);\n    setIsDeleting(false);\n    setDialogError(null);\n  };\n\n  const handleEmergencyToggle = async () => {\n    if (!fundDetails?.userFundDTO) return;\n    \n    try {\n      setIsUpdating(true);\n      const currentEmergencyStatus = fundDetails.userFundDTO.isEmergency;\n      const updateData = {\n        userId: userId,\n        fundId: fund.schemeCode,\n        fundName: fund.schemeName,\n        isEmergency: !currentEmergencyStatus,\n        tag: fundDetails.userFundDTO.tag || '',\n        benchmark: fundDetails.userFundDTO.benchmark || null\n      };\n      \n      await userFundAPI.updateUserFund(userId, fund.schemeCode, updateData);\n      \n      // Update local state instead of reloading\n      setFundDetails(prev => ({\n        ...prev,\n        userFundDTO: {\n          ...prev.userFundDTO,\n          isEmergency: !currentEmergencyStatus\n        }\n      }));\n      \n      setSuccessMessage(`Fund ${!currentEmergencyStatus ? 'marked as' : 'removed from'} emergency fund`);\n      setTimeout(() => setSuccessMessage(''), 5000);\n    } catch (error) {\n      console.error('Error updating emergency status:', error);\n      setError('Failed to update emergency status. Please try again.');\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n  const handleTagEdit = () => {\n    setTagValue(fundDetails?.userFundDTO?.tag || '');\n    setIsEditingTag(true);\n  };\n\n  const handleTagSave = async () => {\n    if (!fundDetails?.userFundDTO) return;\n    \n    try {\n      setIsUpdating(true);\n      const updateData = {\n        userId: userId,\n        fundId: fund.schemeCode,\n        fundName: fund.schemeName,\n        isEmergency: fundDetails.userFundDTO.isEmergency,\n        tag: tagValue.trim(),\n        benchmark: fundDetails.userFundDTO.benchmark || null\n      };\n      \n      await userFundAPI.updateUserFund(userId, fund.schemeCode, updateData);\n      \n      // Update local state instead of reloading\n      setFundDetails(prev => ({\n        ...prev,\n        userFundDTO: {\n          ...prev.userFundDTO,\n          tag: tagValue.trim()\n        }\n      }));\n      \n      setSuccessMessage('Tag updated successfully');\n      setIsEditingTag(false);\n      setTimeout(() => setSuccessMessage(''), 5000);\n    } catch (error) {\n      console.error('Error updating tag:', error);\n      setError('Failed to update tag. Please try again.');\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n  const handleTagCancel = () => {\n    setIsEditingTag(false);\n    setTagValue('');\n  };\n\n  const handleBenchmarkEdit = () => {\n    setBenchmarkValue(userFundDTO?.benchmark || '');\n    setIsEditingBenchmark(true);\n  };\n\n  const handleBenchmarkSave = async () => {\n    if (!fundDetails?.userFundDTO) return;\n    \n    // Validate benchmark value\n    if (benchmarkValue && !benchmarkEnums.includes(benchmarkValue)) {\n      setError('Invalid benchmark value. Please select a valid option.');\n      return;\n    }\n    \n    try {\n      setIsUpdating(true);\n      const updateData = {\n        userId: userId,\n        fundId: fund.schemeCode,\n        fundName: fund.schemeName,\n        isEmergency: fundDetails.userFundDTO.isEmergency,\n        tag: fundDetails.userFundDTO.tag || '',\n        benchmark: benchmarkValue || null\n      };\n      \n      await userFundAPI.updateUserFund(userId, fund.schemeCode, updateData);\n      \n      // Update local state instead of reloading\n      setFundDetails(prev => ({\n        ...prev,\n        userFundDTO: {\n          ...prev.userFundDTO,\n          benchmark: benchmarkValue || null\n        }\n      }));\n      \n      setSuccessMessage('Benchmark updated successfully');\n      setIsEditingBenchmark(false);\n      setTimeout(() => setSuccessMessage(''), 5000);\n    } catch (error) {\n      console.error('Error updating benchmark:', error);\n      setError('Failed to update benchmark. Please try again.');\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n  const handleBenchmarkCancel = () => {\n    setIsEditingBenchmark(false);\n    setBenchmarkValue('');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <LoadingSpinner />\n          <p className=\"mt-4 text-sm text-gray-500\">Loading fund details...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center max-w-md w-full\">\n          <ErrorMessage message={error} onClose={() => setError(null)} />\n          <button\n            onClick={(e) => {\n              e.preventDefault();\n              onBack();\n            }}\n            type=\"button\"\n            className=\"mt-6 px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors\"\n          >\n            Go Back to Dashboard\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (!fundDetails) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center max-w-md w-full\">\n          <div className=\"bg-white p-8 rounded-lg border border-gray-200 shadow-sm\">\n            <PieChart className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n            <p className=\"text-sm text-gray-500 mb-6\">No fund details found</p>\n            <button\n              onClick={(e) => {\n                e.preventDefault();\n                onBack();\n              }}\n              type=\"button\"\n              className=\"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors\"\n            >\n              Go Back to Dashboard\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const { userFundDTO, summary, extraSummary, units, registeredSIPs } = fundDetails;\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white shadow-sm border-b border-gray-200\">\n        <div className=\"max-w-7xl mx-auto px-8 py-6\">\n          {/* Top Row - Back & Title */}\n          <div className=\"flex items-center justify-between mb-6\">\n            <button\n              onClick={(e) => {\n                e.preventDefault();\n                onBack();\n              }}\n              type=\"button\"\n              className=\"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors\"\n            >\n              <ArrowLeft className=\"h-5 w-5\" />\n              <span className=\"text-sm font-medium\">Back to Dashboard</span>\n            </button>\n            <button\n              onClick={handleRefresh}\n              disabled={refreshing}\n              className=\"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50\"\n            >\n              <RefreshCw className={`h-4 w-4 ${refreshing ? 'animate-spin' : ''}`} />\n              <span>{refreshing ? 'Refreshing...' : 'Refresh'}</span>\n            </button>\n          </div>\n\n          {/* Fund Name Section */}\n          <div className=\"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6\">\n            <div>\n              <h1 className=\"text-2xl lg:text-3xl font-bold text-gray-900 mb-3\">{fund.schemeName}</h1>\n              <div className=\"flex flex-wrap items-center gap-4\">\n                {fundDetails?.latestNav && (\n                  <div className=\"flex items-center space-x-2\">\n                    <span className=\"text-sm text-gray-500\">NAV:</span>\n                    <span className=\"text-lg font-semibold text-gray-900\">{fundDetails.latestNav.toFixed(2)}</span>\n                  </div>\n                )}\n                {fundDetails?.latestNavDate && (\n                  <div className=\"flex items-center space-x-2\">\n                    <span className=\"text-sm text-gray-500\">Date:</span>\n                    <span className=\"text-sm font-medium text-gray-700\">{formatDate(fundDetails.latestNavDate)}</span>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* Action Buttons */}\n            <div className=\"flex flex-wrap items-center gap-2\">\n              <button\n                onClick={() => setShowTransactionForm(true)}\n                className=\"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors\"\n              >\n                <Plus className=\"h-4 w-4\" />\n                <span className=\"hidden sm:inline\">Add Transaction</span>\n                <span className=\"sm:hidden\">Add</span>\n              </button>\n              <button\n                onClick={() => setShowBulkTransactionForm(true)}\n                className=\"flex items-center space-x-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white text-sm font-medium rounded-lg transition-colors\"\n              >\n                <Layers className=\"h-4 w-4\" />\n                <span className=\"hidden sm:inline\">Bulk Add</span>\n                <span className=\"sm:hidden\">Bulk</span>\n              </button>\n              <button\n                onClick={() => setShowSIPForm(true)}\n                className=\"flex items-center space-x-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium rounded-lg transition-colors\"\n              >\n                <Calendar className=\"h-4 w-4\" />\n                <span className=\"hidden sm:inline\">Register SIP</span>\n                <span className=\"sm:hidden\">SIP</span>\n              </button>\n              <button\n                onClick={() => setShowHistoricDataModal(true)}\n                className=\"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white text-sm font-medium rounded-lg transition-all duration-200 shadow-md hover:shadow-lg\"\n              >\n                <BarChart3 className=\"h-4 w-4\" />\n                <span className=\"hidden sm:inline\">NAV History</span>\n                <span className=\"sm:hidden\">NAV</span>\n              </button>\n              <button\n                onClick={() => setShowPerformanceModal(true)}\n                className=\"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white text-sm font-medium rounded-lg transition-all duration-200 shadow-md hover:shadow-lg\"\n              >\n                <TrendingUp className=\"h-4 w-4\" />\n                <span className=\"hidden sm:inline\">Performance</span>\n                <span className=\"sm:hidden\">Perf</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"max-w-7xl mx-auto px-8 py-8\">\n        {/* Messages */}\n        {successMessage && (\n          <div className=\"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center justify-between\">\n            <p className=\"text-sm font-medium text-green-800\">{successMessage}</p>\n            <button onClick={() => setSuccessMessage('')} className=\"text-green-600 hover:text-green-800\">\n              <X className=\"h-4 w-4\" />\n            </button>\n          </div>\n        )}\n        {error && (\n          <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center justify-between\">\n            <p className=\"text-sm font-medium text-red-800\">{error}</p>\n            <button onClick={() => setError(null)} className=\"text-red-600 hover:text-red-800\">\n              <X className=\"h-4 w-4\" />\n            </button>\n          </div>\n        )}\n\n        {/* Fund Summary Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8\">\n          {/* Total Invested */}\n          <div className=\"bg-white p-6 rounded-lg border border-gray-200 shadow-sm\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"p-3 bg-blue-50 rounded-lg\">\n                <Coins className=\"h-5 w-5 text-blue-600\" />\n              </div>\n              <div>\n                <p className=\"text-xs text-gray-500 mb-1\">Total Invested</p>\n                <p className=\"text-xl font-bold text-gray-900\">{formatCurrency(summary?.totalInvested)}</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Current Value */}\n          <div className=\"bg-white p-6 rounded-lg border border-gray-200 shadow-sm\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"p-3 bg-green-50 rounded-lg\">\n                <TrendingUp className=\"h-5 w-5 text-green-600\" />\n              </div>\n              <div>\n                <p className=\"text-xs text-gray-500 mb-1\">Current Value</p>\n                <p className=\"text-xl font-bold text-gray-900\">{formatCurrency(summary?.totalValue)}</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Profit/Loss */}\n          <div className=\"bg-white p-6 rounded-lg border border-gray-200 shadow-sm\">\n            <div className=\"flex items-center space-x-4\">\n              <div className={`p-3 rounded-lg ${\n                (summary?.profitLoss || 0) >= 0 ? 'bg-green-50' : 'bg-red-50'\n              }`}>\n                <PieChart className={`h-5 w-5 ${\n                  (summary?.profitLoss || 0) >= 0 ? 'text-green-600' : 'text-red-600'\n                }`} />\n              </div>\n              <div>\n                <p className=\"text-xs text-gray-500 mb-1\">Profit/Loss</p>\n                <p className={`text-xl font-bold ${\n                  (summary?.profitLoss || 0) >= 0 ? 'text-green-600' : 'text-red-600'\n                }`}>\n                  {formatCurrency(summary?.profitLoss)}\n                </p>\n                <p className={`text-xs font-medium ${\n                  (summary?.profitLossPercent || 0) >= 0 ? 'text-green-600' : 'text-red-600'\n                }`}>\n                  {formatPercentage(summary?.profitLossPercent)}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* XIRR */}\n          <div className=\"bg-white p-6 rounded-lg border border-gray-200 shadow-sm\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"p-3 bg-purple-50 rounded-lg\">\n                <Activity className=\"h-5 w-5 text-purple-600\" />\n              </div>\n              <div>\n                <p className=\"text-xs text-gray-500 mb-1\">XIRR</p>\n                <p className=\"text-xl font-bold text-gray-900\">{formatPercentage(extraSummary?.xirr)}</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Long Term Gains */}\n          <div className=\"bg-white p-6 rounded-lg border border-gray-200 shadow-sm\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"p-3 bg-indigo-50 rounded-lg\">\n                <TrendingUp className=\"h-5 w-5 text-indigo-600\" />\n              </div>\n              <div>\n                <p className=\"text-xs text-gray-500 mb-1\">Long Term Gains</p>\n                <p className=\"text-xl font-bold text-gray-900\">{formatCurrency(extraSummary?.longTermGains)}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Fund Information Grid */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\">\n          {/* Fund Details Card */}\n          <div className=\"bg-white rounded-lg border border-gray-200 shadow-sm\">\n            <div className=\"px-6 py-4 border-b border-gray-200\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Fund Information</h3>\n            </div>\n            <div className=\"p-6 space-y-4\">\n              {/* Fund Name */}\n              <div className=\"flex items-center justify-between py-3 border-b border-gray-100\">\n                <span className=\"text-sm text-gray-500\">Fund Name</span>\n                <span className=\"text-sm font-medium text-gray-900\">{userFundDTO?.fundName}</span>\n              </div>\n\n              {/* Tag */}\n              <div className=\"flex items-center justify-between py-3 border-b border-gray-100\">\n                <span className=\"text-sm text-gray-500\">Tag</span>\n                {isEditingTag ? (\n                  <div className=\"flex items-center space-x-2\">\n                    <input\n                      type=\"text\"\n                      value={tagValue}\n                      onChange={(e) => setTagValue(e.target.value)}\n                      className=\"px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      placeholder=\"Enter tag\"\n                      maxLength={50}\n                    />\n                    <button\n                      onClick={handleTagSave}\n                      disabled={isUpdating}\n                      className=\"p-1.5 text-green-600 hover:text-green-700 disabled:opacity-50\"\n                    >\n                      <Save className=\"h-4 w-4\" />\n                    </button>\n                    <button\n                      onClick={handleTagCancel}\n                      disabled={isUpdating}\n                      className=\"p-1.5 text-gray-500 hover:text-gray-700 disabled:opacity-50\"\n                    >\n                      <X className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                ) : (\n                  <div className=\"flex items-center space-x-2\">\n                    <span className=\"text-sm font-medium text-gray-900\">{userFundDTO?.tag || 'No tag'}</span>\n                    <button\n                      onClick={handleTagEdit}\n                      disabled={isUpdating}\n                      className=\"p-1 text-blue-600 hover:text-blue-700 disabled:opacity-50\"\n                    >\n                      <Edit3 className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                )}\n              </div>\n\n              {/* Benchmark */}\n              <div className=\"flex items-center justify-between py-3 border-b border-gray-100\">\n                <span className=\"text-sm text-gray-500\">Benchmark</span>\n                {isEditingBenchmark ? (\n                  <div className=\"flex items-center space-x-2\">\n                    <select\n                      value={benchmarkValue}\n                      onChange={(e) => setBenchmarkValue(e.target.value)}\n                      className=\"px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    >\n                      <option value=\"\">Not Set</option>\n                      {benchmarkEnums.map((benchmark, index) => (\n                        <option key={index} value={benchmark}>\n                          {benchmark}\n                        </option>\n                      ))}\n                    </select>\n                    <button\n                      onClick={handleBenchmarkSave}\n                      disabled={isUpdating}\n                      className=\"p-1.5 text-green-600 hover:text-green-700 disabled:opacity-50\"\n                    >\n                      <Save className=\"h-4 w-4\" />\n                    </button>\n                    <button\n                      onClick={handleBenchmarkCancel}\n                      disabled={isUpdating}\n                      className=\"p-1.5 text-gray-500 hover:text-gray-700 disabled:opacity-50\"\n                    >\n                      <X className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                ) : (\n                  <div className=\"flex items-center space-x-2\">\n                    <span className=\"text-sm font-medium text-gray-900\">{userFundDTO?.benchmark || 'Not Set'}</span>\n                    <button\n                      onClick={handleBenchmarkEdit}\n                      disabled={isUpdating}\n                      className=\"p-1 text-blue-600 hover:text-blue-700 disabled:opacity-50\"\n                    >\n                      <Edit3 className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                )}\n              </div>\n\n              {/* Emergency Fund */}\n              <div className=\"flex items-center justify-between py-3 border-b border-gray-100\">\n                <span className=\"text-sm text-gray-500\">Emergency Fund</span>\n                <div className=\"flex items-center space-x-3\">\n                  <span className={`text-sm font-medium flex items-center ${\n                    userFundDTO?.isEmergency ? 'text-red-600' : 'text-green-600'\n                  }`}>\n                    {userFundDTO?.isEmergency ? (\n                      <>\n                        <Shield className=\"w-4 h-4 mr-1\" />\n                        Yes\n                      </>\n                    ) : (\n                      'No'\n                    )}\n                  </span>\n                  <button\n                    onClick={handleEmergencyToggle}\n                    disabled={isUpdating}\n                    className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 ${\n                      userFundDTO?.isEmergency ? 'bg-red-600' : 'bg-gray-300'\n                    }`}\n                  >\n                    <span\n                      className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${\n                        userFundDTO?.isEmergency ? 'translate-x-6' : 'translate-x-1'\n                      }`}\n                    />\n                  </button>\n                </div>\n              </div>\n\n              {/* Total Units */}\n              <div className=\"flex items-center justify-between py-3\">\n                <span className=\"text-sm text-gray-500\">Total Units</span>\n                <span className=\"text-sm font-semibold text-gray-900\">\n                  {summary?.totalUnits != null ? summary.totalUnits.toFixed(4) : '0.0000'}\n                </span>\n              </div>\n            </div>\n          </div>\n\n          {/* Registered SIPs Card */}\n          <div className=\"bg-white rounded-lg border border-gray-200 shadow-sm\">\n            <div className=\"px-6 py-4 border-b border-gray-200\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Registered SIPs</h3>\n            </div>\n            <div className=\"p-6\">\n              {registeredSIPs && registeredSIPs.length > 0 ? (\n                <div className=\"space-y-3\">\n                  {registeredSIPs.map((sip, index) => (\n                    <div key={sip.id || index} className=\"p-4 bg-purple-50 rounded-lg border border-purple-100\">\n                      <div className=\"flex items-center justify-between\">\n                        <div>\n                          <p className=\"text-sm font-semibold text-gray-900 mb-1\">{sip.fundName}</p>\n                          <p className=\"text-xs text-gray-500\">Monthly SIP</p>\n                        </div>\n                        <div className=\"text-right\">\n                          <p className=\"text-lg font-bold text-gray-900\">{formatCurrency(sip.amount)}</p>\n                          <p className=\"text-xs text-gray-500\">per month</p>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"py-12 text-center\">\n                  <Calendar className=\"h-12 w-12 text-gray-300 mx-auto mb-4\" />\n                  <p className=\"text-sm text-gray-500 mb-2\">No SIPs registered</p>\n                  <p className=\"text-xs text-gray-400\">Click \"Register SIP\" to set up a new SIP</p>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Units History */}\n        <div className=\"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Units History</h3>\n              <div className=\"flex items-center space-x-4 text-xs text-gray-500\">\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"w-2.5 h-2.5 bg-green-500 rounded-full\"></div>\n                  <span>Active</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"w-2.5 h-2.5 bg-gray-500 rounded-full\"></div>\n                  <span>Sold</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"w-2.5 h-2.5 bg-red-500 rounded-full\"></div>\n                  <span>SELL</span>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"overflow-x-auto\">\n            {units && units.length > 0 ? (\n              <table className=\"min-w-full divide-y divide-gray-200\">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                      Date\n                    </th>\n                    <th className=\"px-6 py-3 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                      Type\n                    </th>\n                    <th className=\"px-6 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                      Amount\n                    </th>\n                    <th className=\"px-6 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                      Units\n                    </th>\n                    <th className=\"px-6 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                      P&L\n                    </th>\n                    <th className=\"px-6 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                      P&L %\n                    </th>\n                    <th className=\"px-6 py-3 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                      Action\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-100\">\n                  {units.map((unit, index) => (\n                    <UnitsRow\n                      key={index}\n                      unit={unit}\n                      index={index}\n                      formatCurrency={formatCurrency}\n                      formatDate={formatDate}\n                      formatPercentage={formatPercentage}\n                      onDelete={handleDeleteTransaction}\n                    />\n                  ))}\n                </tbody>\n              </table>\n            ) : (\n              <div className=\"text-center py-16\">\n                <PieChart className=\"h-12 w-12 text-gray-300 mx-auto mb-4\" />\n                <p className=\"text-sm text-gray-500 mb-2\">No units history available</p>\n                <p className=\"text-xs text-gray-400\">Record transactions to see units history</p>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Forms */}\n      <TransactionForm\n        isOpen={showTransactionForm}\n        onClose={() => setShowTransactionForm(false)}\n        fund={fund}\n        userId={userId}\n        onSuccess={handleSuccess}\n      />\n      <BulkTransactionForm\n        isOpen={showBulkTransactionForm}\n        onClose={() => setShowBulkTransactionForm(false)}\n        fund={fund}\n        userId={userId}\n        onSuccess={handleSuccess}\n      />\n      <SIPForm\n        isOpen={showSIPForm}\n        onClose={() => setShowSIPForm(false)}\n        fund={fund}\n        userId={userId}\n        onSuccess={handleSuccess}\n      />\n\n      {/* Delete Transaction Dialog */}\n      {showDeleteDialog && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg shadow-xl w-full max-w-md\">\n            <div className=\"p-6\">\n              {/* Header */}\n              <div className=\"flex items-center justify-center mb-4\">\n                <div className=\"p-3 bg-red-50 rounded-full\">\n                  <svg className=\"h-6 w-6 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n                  </svg>\n                </div>\n              </div>\n\n              {/* Title */}\n              <h3 className=\"text-xl font-semibold text-gray-900 text-center mb-4\">Delete Transaction</h3>\n\n              {/* Message */}\n              {transactionToDelete && (\n                <div className=\"mb-6\">\n                  <p className=\"text-sm text-gray-600 text-center mb-4\">Are you sure you want to delete this transaction?</p>\n                  <div className=\"bg-gray-50 p-4 rounded-lg space-y-2 text-sm\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-500\">Date:</span>\n                      <span className=\"font-medium text-gray-900\">{formatDate(transactionToDelete.date)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-500\">Amount:</span>\n                      <span className=\"font-medium text-gray-900\">{formatCurrency(transactionToDelete.amount)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-500\">Units:</span>\n                      <span className=\"font-medium text-gray-900\">{transactionToDelete.units?.toFixed(4) || '0.0000'}</span>\n                    </div>\n                  </div>\n                  <p className=\"text-xs text-red-600 text-center mt-4 font-medium\">This action cannot be undone.</p>\n                </div>\n              )}\n\n              {/* Error Message */}\n              {dialogError && (\n                <div className=\"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg\">\n                  <div className=\"flex items-start space-x-3\">\n                    <svg className=\"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n                    </svg>\n                    <div className=\"flex-1\">\n                      <p className=\"text-sm text-red-800\">{dialogError}</p>\n                      {dialogError.includes('Redeemed Transaction') && (\n                        <p className=\"text-xs text-red-600 mt-1\">Tip: Redeemed transactions cannot be deleted.</p>\n                      )}\n                    </div>\n                    <button onClick={() => setDialogError(null)} className=\"text-red-600 hover:text-red-800\">\n                      <X className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {/* Buttons */}\n              <div className=\"flex space-x-3\">\n                <button\n                  onClick={cancelDeleteTransaction}\n                  disabled={isDeleting}\n                  className=\"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={confirmDeleteTransaction}\n                  disabled={isDeleting}\n                  className=\"flex-1 px-4 py-2.5 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center\"\n                >\n                  {isDeleting ? (\n                    <>\n                      <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\">\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                      </svg>\n                      Deleting...\n                    </>\n                  ) : (\n                    'Delete'\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* NAV History Modal */}\n      {showHistoricDataModal && (\n        <NavHistoryModal\n          userId={userId}\n          fundId={fund.schemeCode || fund.fundId}\n          title={`NAV History - ${fund.schemeName || fund.name}`}\n          onClose={() => setShowHistoricDataModal(false)}\n          fetchData={userFundAPI.getUserFundHistoricData}\n        />\n      )}\n\n      {/* Performance Chart Modal */}\n      {showPerformanceModal && (\n        <HistoricDataModal\n          userId={userId}\n          fundId={fund.schemeCode || fund.fundId}\n          title={`Performance Chart - ${fund.schemeName || fund.name}`}\n          onClose={() => setShowPerformanceModal(false)}\n          fetchData={userFundAPI.getUserFundPerformanceData}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default UserFundDetail;"],"mappings":"gIAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OACEC,SAAS,CACTC,IAAI,CACJC,QAAQ,CACRC,UAAU,CACVC,KAAK,CACLC,QAAQ,CACRC,MAAM,CACNC,MAAM,CACNC,QAAQ,CACRC,SAAS,CACTC,GAAG,CACHC,SAAS,CACTC,KAAK,CACLC,IAAI,CACJC,CAAC,KACI,cAAc,CACrB,OAASC,WAAW,CAAEC,cAAc,KAAQ,uBAAuB,CACnE,MAAO,CAAAC,iBAAiB,KAAM,yBAAyB,CACvD,MAAO,CAAAC,eAAe,KAAM,uBAAuB,CACnD,MAAO,CAAAC,cAAc,KAAM,8BAA8B,CACzD,MAAO,CAAAC,YAAY,KAAM,4BAA4B,CACrD,MAAO,CAAAC,eAAe,KAAM,uBAAuB,CACnD,MAAO,CAAAC,OAAO,KAAM,eAAe,CACnC,MAAO,CAAAC,mBAAmB,KAAM,2BAA2B,CAC3D,MAAO,CAAAC,QAAQ,KAAM,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE9C,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAkE,KAAAC,qBAAA,IAAjE,CAAEC,IAAI,CAAEC,MAAM,CAAEC,MAAM,CAAEC,mBAAmB,CAAEC,aAAc,CAAC,CAAAN,IAAA,CAClF,KAAM,CAACO,WAAW,CAAEC,cAAc,CAAC,CAAG3C,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAAC4C,OAAO,CAAEC,UAAU,CAAC,CAAG7C,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAC8C,KAAK,CAAEC,QAAQ,CAAC,CAAG/C,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACgD,mBAAmB,CAAEC,sBAAsB,CAAC,CAAGjD,QAAQ,CAAC,KAAK,CAAC,CACrE,KAAM,CAACkD,uBAAuB,CAAEC,0BAA0B,CAAC,CAAGnD,QAAQ,CAAC,KAAK,CAAC,CAC7E,KAAM,CAACoD,WAAW,CAAEC,cAAc,CAAC,CAAGrD,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACsD,cAAc,CAAEC,iBAAiB,CAAC,CAAGvD,QAAQ,CAAC,EAAE,CAAC,CACxD,KAAM,CAACwD,UAAU,CAAEC,aAAa,CAAC,CAAGzD,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAAC0D,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG3D,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAAC4D,mBAAmB,CAAEC,sBAAsB,CAAC,CAAG7D,QAAQ,CAAC,IAAI,CAAC,CACpE,KAAM,CAAC8D,UAAU,CAAEC,aAAa,CAAC,CAAG/D,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACgE,WAAW,CAAEC,cAAc,CAAC,CAAGjE,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACkE,YAAY,CAAEC,eAAe,CAAC,CAAGnE,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAACoE,QAAQ,CAAEC,WAAW,CAAC,CAAGrE,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACsE,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGvE,QAAQ,CAAC,KAAK,CAAC,CACnE,KAAM,CAACwE,cAAc,CAAEC,iBAAiB,CAAC,CAAGzE,QAAQ,CAAC,EAAE,CAAC,CACxD,KAAM,CAAC0E,cAAc,CAAEC,iBAAiB,CAAC,CAAG3E,QAAQ,CAAC,EAAE,CAAC,CACxD,KAAM,CAAC4E,UAAU,CAAEC,aAAa,CAAC,CAAG7E,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAAC8E,qBAAqB,CAAEC,wBAAwB,CAAC,CAAG/E,QAAQ,CAAC,KAAK,CAAC,CACzE,KAAM,CAACgF,oBAAoB,CAAEC,uBAAuB,CAAC,CAAGjF,QAAQ,CAAC,KAAK,CAAC,CAEvE,KAAM,CAAAkF,eAAe,CAAGhF,WAAW,CAAC,SAAY,CAC9C,GAAI,CACF2C,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CAEd;AACA,KAAM,CAACoC,QAAQ,CAAEC,KAAK,CAAC,CAAG,KAAM,CAAAC,OAAO,CAACC,GAAG,CAAC,CAC1CpE,WAAW,CAACqE,kBAAkB,CAACjD,MAAM,CAAED,IAAI,CAACmD,UAAU,CAAC,CACvDtE,WAAW,CAACuE,iBAAiB,CAAC,CAAC,CAChC,CAAC,CAEFC,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAER,QAAQ,CAAC,CAE/C,GAAIA,QAAQ,CAAE,CACZxC,cAAc,CAACwC,QAAQ,CAAC,CAC1B,CAAC,IAAM,CACLpC,QAAQ,CAAC,6BAA6B,CAAC,CACzC,CAEA4B,iBAAiB,CAACS,KAAK,EAAI,EAAE,CAAC,CAChC,CAAE,MAAOQ,GAAG,CAAE,CACZF,OAAO,CAAC5C,KAAK,CAAC,6BAA6B,CAAE8C,GAAG,CAAC,CACjD7C,QAAQ,CAAC,gDAAgD,CAAC,CAC5D,CAAC,OAAS,CACRF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,CAACP,MAAM,CAAED,IAAI,CAACmD,UAAU,CAAC,CAAC,CAE7BvF,SAAS,CAAC,IAAM,CACd,GAAIoC,IAAI,EAAIC,MAAM,CAAE,CAClB4C,eAAe,CAAC,CAAC,CACnB,CACF,CAAC,CAAE,CAAC7C,IAAI,CAAEC,MAAM,CAAE4C,eAAe,CAAC,CAAC,CAEnC,KAAM,CAAAW,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChCpC,aAAa,CAAC,IAAI,CAAC,CACnB,KAAM,CAAAyB,eAAe,CAAC,CAAC,CACvBzB,aAAa,CAAC,KAAK,CAAC,CACtB,CAAC,CAED,KAAM,CAAAqC,cAAc,CAAIC,MAAM,EAAK,CACjC,MAAO,IAAI,CAAAC,IAAI,CAACC,YAAY,CAAC,OAAO,CAAE,CACpCC,KAAK,CAAE,UAAU,CACjBC,QAAQ,CAAE,KAAK,CACfC,qBAAqB,CAAE,CACzB,CAAC,CAAC,CAACC,MAAM,CAACN,MAAM,EAAI,CAAC,CAAC,CACxB,CAAC,CAED,KAAM,CAAAO,UAAU,CAAIC,UAAU,EAAK,CACjC,GAAI,CAACA,UAAU,CAAE,MAAO,cAAc,CAEtC,GAAI,CACF;AACA,GAAI,MAAO,CAAAA,UAAU,GAAK,QAAQ,CAAE,CAClC;AACA,KAAM,CAAAC,KAAK,CAAGD,UAAU,CAACE,KAAK,CAAC,GAAG,CAAC,CACnC,GAAID,KAAK,CAACE,MAAM,GAAK,CAAC,CAAE,CACtB,KAAM,CAAAC,GAAG,CAAGH,KAAK,CAAC,CAAC,CAAC,CACpB,KAAM,CAAAI,KAAK,CAAGJ,KAAK,CAAC,CAAC,CAAC,CACtB,KAAM,CAAAK,IAAI,CAAGL,KAAK,CAAC,CAAC,CAAC,CAErB;AACA,KAAM,CAAAM,IAAI,CAAG,GAAI,CAAAC,IAAI,CAACF,IAAI,CAAED,KAAK,CAAG,CAAC,CAAED,GAAG,CAAC,CAE3C;AACA,GAAIK,KAAK,CAACF,IAAI,CAACG,OAAO,CAAC,CAAC,CAAC,CAAE,CACzB,MAAO,cAAc,CACvB,CAEA,MAAO,CAAAH,IAAI,CAACI,kBAAkB,CAAC,OAAO,CAAE,CACtCL,IAAI,CAAE,SAAS,CACfD,KAAK,CAAE,OAAO,CACdD,GAAG,CAAE,SACP,CAAC,CAAC,CACJ,CACF,CAEA;AACA,GAAI,CAAAG,IAAI,CACR,GAAI,MAAO,CAAAP,UAAU,GAAK,QAAQ,CAAE,CAClC,GAAIA,UAAU,CAAG,WAAW,CAAE,CAC5B;AACAO,IAAI,CAAG,GAAI,CAAAC,IAAI,CAACR,UAAU,CAAC,CAC7B,CAAC,IAAM,CACL;AACAO,IAAI,CAAG,GAAI,CAAAC,IAAI,CAACR,UAAU,CAAG,IAAI,CAAC,CACpC,CACF,CAAC,IAAM,CACLO,IAAI,CAAG,GAAI,CAAAC,IAAI,CAACR,UAAU,CAAC,CAC7B,CAEA;AACA,GAAIS,KAAK,CAACF,IAAI,CAACG,OAAO,CAAC,CAAC,CAAC,CAAE,CACzB,MAAO,cAAc,CACvB,CAEA,MAAO,CAAAH,IAAI,CAACI,kBAAkB,CAAC,OAAO,CAAE,CACtCL,IAAI,CAAE,SAAS,CACfD,KAAK,CAAE,OAAO,CACdD,GAAG,CAAE,SACP,CAAC,CAAC,CACJ,CAAE,MAAO7D,KAAK,CAAE,CACd4C,OAAO,CAAC5C,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9C,MAAO,cAAc,CACvB,CACF,CAAC,CAED,KAAM,CAAAqE,gBAAgB,CAAIC,KAAK,EAAK,CAClC,GAAIA,KAAK,EAAI,IAAI,EAAIJ,KAAK,CAACI,KAAK,CAAC,CAAE,CACjC,MAAO,KAAK,CACd,CACA,SAAAC,MAAA,CAAUD,KAAK,CAACE,OAAO,CAAC,CAAC,CAAC,MAC5B,CAAC,CAED,KAAM,CAAAC,aAAa,CAAIC,OAAO,EAAK,CACjCjE,iBAAiB,CAACiE,OAAO,CAAC,CAC1B;AACAtC,eAAe,CAAC,CAAC,CACjB;AACAuC,UAAU,CAAC,IAAMlE,iBAAiB,CAAC,EAAE,CAAC,CAAE,IAAI,CAAC,CAC/C,CAAC,CAED,KAAM,CAAAmE,uBAAuB,CAAIC,IAAI,EAAK,CACxC,GAAI,CAACA,IAAI,CAACC,aAAa,CAAE,CACvB7E,QAAQ,CAAC,oDAAoD,CAAC,CAC9D,OACF,CAEAc,sBAAsB,CAAC8D,IAAI,CAAC,CAC5B1D,cAAc,CAAC,IAAI,CAAC,CACpBN,mBAAmB,CAAC,IAAI,CAAC,CAC3B,CAAC,CAED,KAAM,CAAAkE,wBAAwB,CAAG,KAAAA,CAAA,GAAY,CAC3C,GAAI,CAACjE,mBAAmB,CAAE,OAE1B,GAAI,CACFG,aAAa,CAAC,IAAI,CAAC,CACnBE,cAAc,CAAC,IAAI,CAAC,CACpBlB,QAAQ,CAAC,IAAI,CAAC,CACd,KAAM,CAAA5B,cAAc,CAAC2G,iBAAiB,CAAClE,mBAAmB,CAACgE,aAAa,CAAC,CACzErE,iBAAiB,CAAC,kCAAkC,CAAC,CACrD;AACA,KAAM,CAAA2B,eAAe,CAAC,CAAC,CACvB;AACAuC,UAAU,CAAC,IAAMlE,iBAAiB,CAAC,EAAE,CAAC,CAAE,IAAI,CAAC,CAC7C;AACAI,mBAAmB,CAAC,KAAK,CAAC,CAC1BE,sBAAsB,CAAC,IAAI,CAAC,CAC9B,CAAE,MAAO+B,GAAG,CAAE,KAAAmC,aAAA,CAAAC,kBAAA,CACZtC,OAAO,CAAC5C,KAAK,CAAC,6BAA6B,CAAE8C,GAAG,CAAC,CAEjD;AACA,GAAI,CAAAqC,YAAY,CAAG,mBAAmB,CAEtC,IAAAF,aAAA,CAAInC,GAAG,CAACT,QAAQ,UAAA4C,aAAA,YAAAC,kBAAA,CAAZD,aAAA,CAAcG,IAAI,UAAAF,kBAAA,WAAlBA,kBAAA,CAAoBR,OAAO,CAAE,CAC/B;AACAS,YAAY,CAAGrC,GAAG,CAACT,QAAQ,CAAC+C,IAAI,CAACV,OAAO,CAC1C,CAAC,IAAM,IAAI5B,GAAG,CAAC4B,OAAO,CAAE,CACtB;AACAS,YAAY,CAAGrC,GAAG,CAAC4B,OAAO,CAC5B,CAAC,IAAM,IAAI,MAAO,CAAA5B,GAAG,GAAK,QAAQ,CAAE,CAClC;AACAqC,YAAY,CAAGrC,GAAG,CACpB,CAEA3B,cAAc,CAACgE,YAAY,CAAC,CAC9B,CAAC,OAAS,CACRlE,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAED,KAAM,CAAAoE,uBAAuB,CAAGA,CAAA,GAAM,CACpCxE,mBAAmB,CAAC,KAAK,CAAC,CAC1BE,sBAAsB,CAAC,IAAI,CAAC,CAC5BE,aAAa,CAAC,KAAK,CAAC,CACpBE,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,CAED,KAAM,CAAAmE,qBAAqB,CAAG,KAAAA,CAAA,GAAY,CACxC,GAAI,EAAC1F,WAAW,SAAXA,WAAW,WAAXA,WAAW,CAAE2F,WAAW,EAAE,OAE/B,GAAI,CACFxD,aAAa,CAAC,IAAI,CAAC,CACnB,KAAM,CAAAyD,sBAAsB,CAAG5F,WAAW,CAAC2F,WAAW,CAACE,WAAW,CAClE,KAAM,CAAAC,UAAU,CAAG,CACjBlG,MAAM,CAAEA,MAAM,CACdmG,MAAM,CAAEpG,IAAI,CAACmD,UAAU,CACvBkD,QAAQ,CAAErG,IAAI,CAACsG,UAAU,CACzBJ,WAAW,CAAE,CAACD,sBAAsB,CACpCM,GAAG,CAAElG,WAAW,CAAC2F,WAAW,CAACO,GAAG,EAAI,EAAE,CACtCC,SAAS,CAAEnG,WAAW,CAAC2F,WAAW,CAACQ,SAAS,EAAI,IAClD,CAAC,CAED,KAAM,CAAA3H,WAAW,CAAC4H,cAAc,CAACxG,MAAM,CAAED,IAAI,CAACmD,UAAU,CAAEgD,UAAU,CAAC,CAErE;AACA7F,cAAc,CAACoG,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACdD,IAAI,MACPV,WAAW,CAAAW,aAAA,CAAAA,aAAA,IACND,IAAI,CAACV,WAAW,MACnBE,WAAW,CAAE,CAACD,sBAAsB,EACrC,EACD,CAAC,CAEH/E,iBAAiB,SAAA8D,MAAA,CAAS,CAACiB,sBAAsB,CAAG,WAAW,CAAG,cAAc,mBAAiB,CAAC,CAClGb,UAAU,CAAC,IAAMlE,iBAAiB,CAAC,EAAE,CAAC,CAAE,IAAI,CAAC,CAC/C,CAAE,MAAOT,KAAK,CAAE,CACd4C,OAAO,CAAC5C,KAAK,CAAC,kCAAkC,CAAEA,KAAK,CAAC,CACxDC,QAAQ,CAAC,sDAAsD,CAAC,CAClE,CAAC,OAAS,CACR8B,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAED,KAAM,CAAAoE,aAAa,CAAGA,CAAA,GAAM,KAAAC,qBAAA,CAC1B7E,WAAW,CAAC,CAAA3B,WAAW,SAAXA,WAAW,kBAAAwG,qBAAA,CAAXxG,WAAW,CAAE2F,WAAW,UAAAa,qBAAA,iBAAxBA,qBAAA,CAA0BN,GAAG,GAAI,EAAE,CAAC,CAChDzE,eAAe,CAAC,IAAI,CAAC,CACvB,CAAC,CAED,KAAM,CAAAgF,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,EAACzG,WAAW,SAAXA,WAAW,WAAXA,WAAW,CAAE2F,WAAW,EAAE,OAE/B,GAAI,CACFxD,aAAa,CAAC,IAAI,CAAC,CACnB,KAAM,CAAA2D,UAAU,CAAG,CACjBlG,MAAM,CAAEA,MAAM,CACdmG,MAAM,CAAEpG,IAAI,CAACmD,UAAU,CACvBkD,QAAQ,CAAErG,IAAI,CAACsG,UAAU,CACzBJ,WAAW,CAAE7F,WAAW,CAAC2F,WAAW,CAACE,WAAW,CAChDK,GAAG,CAAExE,QAAQ,CAACgF,IAAI,CAAC,CAAC,CACpBP,SAAS,CAAEnG,WAAW,CAAC2F,WAAW,CAACQ,SAAS,EAAI,IAClD,CAAC,CAED,KAAM,CAAA3H,WAAW,CAAC4H,cAAc,CAACxG,MAAM,CAAED,IAAI,CAACmD,UAAU,CAAEgD,UAAU,CAAC,CAErE;AACA7F,cAAc,CAACoG,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACdD,IAAI,MACPV,WAAW,CAAAW,aAAA,CAAAA,aAAA,IACND,IAAI,CAACV,WAAW,MACnBO,GAAG,CAAExE,QAAQ,CAACgF,IAAI,CAAC,CAAC,EACrB,EACD,CAAC,CAEH7F,iBAAiB,CAAC,0BAA0B,CAAC,CAC7CY,eAAe,CAAC,KAAK,CAAC,CACtBsD,UAAU,CAAC,IAAMlE,iBAAiB,CAAC,EAAE,CAAC,CAAE,IAAI,CAAC,CAC/C,CAAE,MAAOT,KAAK,CAAE,CACd4C,OAAO,CAAC5C,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAC,CAC3CC,QAAQ,CAAC,yCAAyC,CAAC,CACrD,CAAC,OAAS,CACR8B,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAED,KAAM,CAAAwE,eAAe,CAAGA,CAAA,GAAM,CAC5BlF,eAAe,CAAC,KAAK,CAAC,CACtBE,WAAW,CAAC,EAAE,CAAC,CACjB,CAAC,CAED,KAAM,CAAAiF,mBAAmB,CAAGA,CAAA,GAAM,CAChC7E,iBAAiB,CAAC,CAAA4D,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEQ,SAAS,GAAI,EAAE,CAAC,CAC/CtE,qBAAqB,CAAC,IAAI,CAAC,CAC7B,CAAC,CAED,KAAM,CAAAgF,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtC,GAAI,EAAC7G,WAAW,SAAXA,WAAW,WAAXA,WAAW,CAAE2F,WAAW,EAAE,OAE/B;AACA,GAAI7D,cAAc,EAAI,CAACE,cAAc,CAAC8E,QAAQ,CAAChF,cAAc,CAAC,CAAE,CAC9DzB,QAAQ,CAAC,wDAAwD,CAAC,CAClE,OACF,CAEA,GAAI,CACF8B,aAAa,CAAC,IAAI,CAAC,CACnB,KAAM,CAAA2D,UAAU,CAAG,CACjBlG,MAAM,CAAEA,MAAM,CACdmG,MAAM,CAAEpG,IAAI,CAACmD,UAAU,CACvBkD,QAAQ,CAAErG,IAAI,CAACsG,UAAU,CACzBJ,WAAW,CAAE7F,WAAW,CAAC2F,WAAW,CAACE,WAAW,CAChDK,GAAG,CAAElG,WAAW,CAAC2F,WAAW,CAACO,GAAG,EAAI,EAAE,CACtCC,SAAS,CAAErE,cAAc,EAAI,IAC/B,CAAC,CAED,KAAM,CAAAtD,WAAW,CAAC4H,cAAc,CAACxG,MAAM,CAAED,IAAI,CAACmD,UAAU,CAAEgD,UAAU,CAAC,CAErE;AACA7F,cAAc,CAACoG,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACdD,IAAI,MACPV,WAAW,CAAAW,aAAA,CAAAA,aAAA,IACND,IAAI,CAACV,WAAW,MACnBQ,SAAS,CAAErE,cAAc,EAAI,IAAI,EAClC,EACD,CAAC,CAEHjB,iBAAiB,CAAC,gCAAgC,CAAC,CACnDgB,qBAAqB,CAAC,KAAK,CAAC,CAC5BkD,UAAU,CAAC,IAAMlE,iBAAiB,CAAC,EAAE,CAAC,CAAE,IAAI,CAAC,CAC/C,CAAE,MAAOT,KAAK,CAAE,CACd4C,OAAO,CAAC5C,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACjDC,QAAQ,CAAC,+CAA+C,CAAC,CAC3D,CAAC,OAAS,CACR8B,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAED,KAAM,CAAA4E,qBAAqB,CAAGA,CAAA,GAAM,CAClClF,qBAAqB,CAAC,KAAK,CAAC,CAC5BE,iBAAiB,CAAC,EAAE,CAAC,CACvB,CAAC,CAED,GAAI7B,OAAO,CAAE,CACX,mBACEf,IAAA,QAAK6H,SAAS,CAAC,0DAA0D,CAAAC,QAAA,cACvE5H,KAAA,QAAK2H,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B9H,IAAA,CAACP,cAAc,GAAE,CAAC,cAClBO,IAAA,MAAG6H,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,yBAAuB,CAAG,CAAC,EAClE,CAAC,CACH,CAAC,CAEV,CAEA,GAAI7G,KAAK,CAAE,CACT,mBACEjB,IAAA,QAAK6H,SAAS,CAAC,0DAA0D,CAAAC,QAAA,cACvE5H,KAAA,QAAK2H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9H,IAAA,CAACN,YAAY,EAACiG,OAAO,CAAE1E,KAAM,CAAC8G,OAAO,CAAEA,CAAA,GAAM7G,QAAQ,CAAC,IAAI,CAAE,CAAE,CAAC,cAC/DlB,IAAA,WACEgI,OAAO,CAAGC,CAAC,EAAK,CACdA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBxH,MAAM,CAAC,CAAC,CACV,CAAE,CACFyH,IAAI,CAAC,QAAQ,CACbN,SAAS,CAAC,oGAAoG,CAAAC,QAAA,CAC/G,sBAED,CAAQ,CAAC,EACN,CAAC,CACH,CAAC,CAEV,CAEA,GAAI,CAACjH,WAAW,CAAE,CAChB,mBACEb,IAAA,QAAK6H,SAAS,CAAC,0DAA0D,CAAAC,QAAA,cACvE9H,IAAA,QAAK6H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cAC1C5H,KAAA,QAAK2H,SAAS,CAAC,0DAA0D,CAAAC,QAAA,eACvE9H,IAAA,CAACrB,QAAQ,EAACkJ,SAAS,CAAC,sCAAsC,CAAE,CAAC,cAC7D7H,IAAA,MAAG6H,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,uBAAqB,CAAG,CAAC,cACnE9H,IAAA,WACEgI,OAAO,CAAGC,CAAC,EAAK,CACdA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBxH,MAAM,CAAC,CAAC,CACV,CAAE,CACFyH,IAAI,CAAC,QAAQ,CACbN,SAAS,CAAC,+FAA+F,CAAAC,QAAA,CAC1G,sBAED,CAAQ,CAAC,EACN,CAAC,CACH,CAAC,CACH,CAAC,CAEV,CAEA,KAAM,CAAEtB,WAAW,CAAE4B,OAAO,CAAEC,YAAY,CAAEC,KAAK,CAAEC,cAAe,CAAC,CAAG1H,WAAW,CAEjF,mBACEX,KAAA,QAAK2H,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eAEtC9H,IAAA,QAAK6H,SAAS,CAAC,6CAA6C,CAAAC,QAAA,cAC1D5H,KAAA,QAAK2H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAE1C5H,KAAA,QAAK2H,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrD5H,KAAA,WACE8H,OAAO,CAAGC,CAAC,EAAK,CACdA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBxH,MAAM,CAAC,CAAC,CACV,CAAE,CACFyH,IAAI,CAAC,QAAQ,CACbN,SAAS,CAAC,iFAAiF,CAAAC,QAAA,eAE3F9H,IAAA,CAAC1B,SAAS,EAACuJ,SAAS,CAAC,SAAS,CAAE,CAAC,cACjC7H,IAAA,SAAM6H,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAAC,mBAAiB,CAAM,CAAC,EACxD,CAAC,cACT5H,KAAA,WACE8H,OAAO,CAAEhE,aAAc,CACvBwE,QAAQ,CAAE7G,UAAW,CACrBkG,SAAS,CAAC,wJAAwJ,CAAAC,QAAA,eAElK9H,IAAA,CAACf,SAAS,EAAC4I,SAAS,YAAArC,MAAA,CAAa7D,UAAU,CAAG,cAAc,CAAG,EAAE,CAAG,CAAE,CAAC,cACvE3B,IAAA,SAAA8H,QAAA,CAAOnG,UAAU,CAAG,eAAe,CAAG,SAAS,CAAO,CAAC,EACjD,CAAC,EACN,CAAC,cAGNzB,KAAA,QAAK2H,SAAS,CAAC,mEAAmE,CAAAC,QAAA,eAChF5H,KAAA,QAAA4H,QAAA,eACE9H,IAAA,OAAI6H,SAAS,CAAC,mDAAmD,CAAAC,QAAA,CAAEtH,IAAI,CAACsG,UAAU,CAAK,CAAC,cACxF5G,KAAA,QAAK2H,SAAS,CAAC,mCAAmC,CAAAC,QAAA,EAC/C,CAAAjH,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAE4H,SAAS,gBACrBvI,KAAA,QAAK2H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9H,IAAA,SAAM6H,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,MAAI,CAAM,CAAC,cACnD5H,KAAA,SAAM2H,SAAS,CAAC,qCAAqC,CAAAC,QAAA,EAAC,QAAC,CAACjH,WAAW,CAAC4H,SAAS,CAAChD,OAAO,CAAC,CAAC,CAAC,EAAO,CAAC,EAC7F,CACN,CACA,CAAA5E,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAE6H,aAAa,gBACzBxI,KAAA,QAAK2H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9H,IAAA,SAAM6H,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,OAAK,CAAM,CAAC,cACpD9H,IAAA,SAAM6H,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAErD,UAAU,CAAC5D,WAAW,CAAC6H,aAAa,CAAC,CAAO,CAAC,EAC/F,CACN,EACE,CAAC,EACH,CAAC,cAGNxI,KAAA,QAAK2H,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD5H,KAAA,WACE8H,OAAO,CAAEA,CAAA,GAAM5G,sBAAsB,CAAC,IAAI,CAAE,CAC5CyG,SAAS,CAAC,iIAAiI,CAAAC,QAAA,eAE3I9H,IAAA,CAACzB,IAAI,EAACsJ,SAAS,CAAC,SAAS,CAAE,CAAC,cAC5B7H,IAAA,SAAM6H,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,iBAAe,CAAM,CAAC,cACzD9H,IAAA,SAAM6H,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,KAAG,CAAM,CAAC,EAChC,CAAC,cACT5H,KAAA,WACE8H,OAAO,CAAEA,CAAA,GAAM1G,0BAA0B,CAAC,IAAI,CAAE,CAChDuG,SAAS,CAAC,qIAAqI,CAAAC,QAAA,eAE/I9H,IAAA,CAACpB,MAAM,EAACiJ,SAAS,CAAC,SAAS,CAAE,CAAC,cAC9B7H,IAAA,SAAM6H,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,UAAQ,CAAM,CAAC,cAClD9H,IAAA,SAAM6H,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,MAAI,CAAM,CAAC,EACjC,CAAC,cACT5H,KAAA,WACE8H,OAAO,CAAEA,CAAA,GAAMxG,cAAc,CAAC,IAAI,CAAE,CACpCqG,SAAS,CAAC,qIAAqI,CAAAC,QAAA,eAE/I9H,IAAA,CAACxB,QAAQ,EAACqJ,SAAS,CAAC,SAAS,CAAE,CAAC,cAChC7H,IAAA,SAAM6H,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,cAAY,CAAM,CAAC,cACtD9H,IAAA,SAAM6H,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,KAAG,CAAM,CAAC,EAChC,CAAC,cACT5H,KAAA,WACE8H,OAAO,CAAEA,CAAA,GAAM9E,wBAAwB,CAAC,IAAI,CAAE,CAC9C2E,SAAS,CAAC,4NAA4N,CAAAC,QAAA,eAEtO9H,IAAA,CAACjB,SAAS,EAAC8I,SAAS,CAAC,SAAS,CAAE,CAAC,cACjC7H,IAAA,SAAM6H,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,aAAW,CAAM,CAAC,cACrD9H,IAAA,SAAM6H,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,KAAG,CAAM,CAAC,EAChC,CAAC,cACT5H,KAAA,WACE8H,OAAO,CAAEA,CAAA,GAAM5E,uBAAuB,CAAC,IAAI,CAAE,CAC7CyE,SAAS,CAAC,gOAAgO,CAAAC,QAAA,eAE1O9H,IAAA,CAACvB,UAAU,EAACoJ,SAAS,CAAC,SAAS,CAAE,CAAC,cAClC7H,IAAA,SAAM6H,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,aAAW,CAAM,CAAC,cACrD9H,IAAA,SAAM6H,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,MAAI,CAAM,CAAC,EACjC,CAAC,EACN,CAAC,EACH,CAAC,EACH,CAAC,CACH,CAAC,cAGN5H,KAAA,QAAK2H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,EAEzCrG,cAAc,eACbvB,KAAA,QAAK2H,SAAS,CAAC,2FAA2F,CAAAC,QAAA,eACxG9H,IAAA,MAAG6H,SAAS,CAAC,oCAAoC,CAAAC,QAAA,CAAErG,cAAc,CAAI,CAAC,cACtEzB,IAAA,WAAQgI,OAAO,CAAEA,CAAA,GAAMtG,iBAAiB,CAAC,EAAE,CAAE,CAACmG,SAAS,CAAC,qCAAqC,CAAAC,QAAA,cAC3F9H,IAAA,CAACZ,CAAC,EAACyI,SAAS,CAAC,SAAS,CAAE,CAAC,CACnB,CAAC,EACN,CACN,CACA5G,KAAK,eACJf,KAAA,QAAK2H,SAAS,CAAC,uFAAuF,CAAAC,QAAA,eACpG9H,IAAA,MAAG6H,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAE7G,KAAK,CAAI,CAAC,cAC3DjB,IAAA,WAAQgI,OAAO,CAAEA,CAAA,GAAM9G,QAAQ,CAAC,IAAI,CAAE,CAAC2G,SAAS,CAAC,iCAAiC,CAAAC,QAAA,cAChF9H,IAAA,CAACZ,CAAC,EAACyI,SAAS,CAAC,SAAS,CAAE,CAAC,CACnB,CAAC,EACN,CACN,cAGD3H,KAAA,QAAK2H,SAAS,CAAC,2DAA2D,CAAAC,QAAA,eAExE9H,IAAA,QAAK6H,SAAS,CAAC,0DAA0D,CAAAC,QAAA,cACvE5H,KAAA,QAAK2H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9H,IAAA,QAAK6H,SAAS,CAAC,2BAA2B,CAAAC,QAAA,cACxC9H,IAAA,CAACtB,KAAK,EAACmJ,SAAS,CAAC,uBAAuB,CAAE,CAAC,CACxC,CAAC,cACN3H,KAAA,QAAA4H,QAAA,eACE9H,IAAA,MAAG6H,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,gBAAc,CAAG,CAAC,cAC5D9H,IAAA,MAAG6H,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAE7D,cAAc,CAACmE,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEO,aAAa,CAAC,CAAI,CAAC,EACxF,CAAC,EACH,CAAC,CACH,CAAC,cAGN3I,IAAA,QAAK6H,SAAS,CAAC,0DAA0D,CAAAC,QAAA,cACvE5H,KAAA,QAAK2H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9H,IAAA,QAAK6H,SAAS,CAAC,4BAA4B,CAAAC,QAAA,cACzC9H,IAAA,CAACvB,UAAU,EAACoJ,SAAS,CAAC,wBAAwB,CAAE,CAAC,CAC9C,CAAC,cACN3H,KAAA,QAAA4H,QAAA,eACE9H,IAAA,MAAG6H,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,eAAa,CAAG,CAAC,cAC3D9H,IAAA,MAAG6H,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAE7D,cAAc,CAACmE,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEQ,UAAU,CAAC,CAAI,CAAC,EACrF,CAAC,EACH,CAAC,CACH,CAAC,cAGN5I,IAAA,QAAK6H,SAAS,CAAC,0DAA0D,CAAAC,QAAA,cACvE5H,KAAA,QAAK2H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9H,IAAA,QAAK6H,SAAS,mBAAArC,MAAA,CACZ,CAAC,CAAA4C,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAES,UAAU,GAAI,CAAC,GAAK,CAAC,CAAG,aAAa,CAAG,WAAW,CAC5D,CAAAf,QAAA,cACD9H,IAAA,CAACrB,QAAQ,EAACkJ,SAAS,YAAArC,MAAA,CACjB,CAAC,CAAA4C,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAES,UAAU,GAAI,CAAC,GAAK,CAAC,CAAG,gBAAgB,CAAG,cAAc,CAClE,CAAE,CAAC,CACH,CAAC,cACN3I,KAAA,QAAA4H,QAAA,eACE9H,IAAA,MAAG6H,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,aAAW,CAAG,CAAC,cACzD9H,IAAA,MAAG6H,SAAS,sBAAArC,MAAA,CACV,CAAC,CAAA4C,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAES,UAAU,GAAI,CAAC,GAAK,CAAC,CAAG,gBAAgB,CAAG,cAAc,CAClE,CAAAf,QAAA,CACA7D,cAAc,CAACmE,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAES,UAAU,CAAC,CACnC,CAAC,cACJ7I,IAAA,MAAG6H,SAAS,wBAAArC,MAAA,CACV,CAAC,CAAA4C,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEU,iBAAiB,GAAI,CAAC,GAAK,CAAC,CAAG,gBAAgB,CAAG,cAAc,CACzE,CAAAhB,QAAA,CACAxC,gBAAgB,CAAC8C,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEU,iBAAiB,CAAC,CAC5C,CAAC,EACD,CAAC,EACH,CAAC,CACH,CAAC,cAGN9I,IAAA,QAAK6H,SAAS,CAAC,0DAA0D,CAAAC,QAAA,cACvE5H,KAAA,QAAK2H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9H,IAAA,QAAK6H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cAC1C9H,IAAA,CAAClB,QAAQ,EAAC+I,SAAS,CAAC,yBAAyB,CAAE,CAAC,CAC7C,CAAC,cACN3H,KAAA,QAAA4H,QAAA,eACE9H,IAAA,MAAG6H,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,MAAI,CAAG,CAAC,cAClD9H,IAAA,MAAG6H,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAExC,gBAAgB,CAAC+C,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAEU,IAAI,CAAC,CAAI,CAAC,EACtF,CAAC,EACH,CAAC,CACH,CAAC,cAGN/I,IAAA,QAAK6H,SAAS,CAAC,0DAA0D,CAAAC,QAAA,cACvE5H,KAAA,QAAK2H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9H,IAAA,QAAK6H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cAC1C9H,IAAA,CAACvB,UAAU,EAACoJ,SAAS,CAAC,yBAAyB,CAAE,CAAC,CAC/C,CAAC,cACN3H,KAAA,QAAA4H,QAAA,eACE9H,IAAA,MAAG6H,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,iBAAe,CAAG,CAAC,cAC7D9H,IAAA,MAAG6H,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAE7D,cAAc,CAACoE,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAEW,aAAa,CAAC,CAAI,CAAC,EAC7F,CAAC,EACH,CAAC,CACH,CAAC,EACH,CAAC,cAGN9I,KAAA,QAAK2H,SAAS,CAAC,4CAA4C,CAAAC,QAAA,eAEzD5H,KAAA,QAAK2H,SAAS,CAAC,sDAAsD,CAAAC,QAAA,eACnE9H,IAAA,QAAK6H,SAAS,CAAC,oCAAoC,CAAAC,QAAA,cACjD9H,IAAA,OAAI6H,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAC,kBAAgB,CAAI,CAAC,CACtE,CAAC,cACN5H,KAAA,QAAK2H,SAAS,CAAC,eAAe,CAAAC,QAAA,eAE5B5H,KAAA,QAAK2H,SAAS,CAAC,iEAAiE,CAAAC,QAAA,eAC9E9H,IAAA,SAAM6H,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,WAAS,CAAM,CAAC,cACxD9H,IAAA,SAAM6H,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAEtB,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEK,QAAQ,CAAO,CAAC,EAC/E,CAAC,cAGN3G,KAAA,QAAK2H,SAAS,CAAC,iEAAiE,CAAAC,QAAA,eAC9E9H,IAAA,SAAM6H,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,KAAG,CAAM,CAAC,CACjDzF,YAAY,cACXnC,KAAA,QAAK2H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9H,IAAA,UACEmI,IAAI,CAAC,MAAM,CACX5C,KAAK,CAAEhD,QAAS,CAChB0G,QAAQ,CAAGhB,CAAC,EAAKzF,WAAW,CAACyF,CAAC,CAACiB,MAAM,CAAC3D,KAAK,CAAE,CAC7CsC,SAAS,CAAC,iIAAiI,CAC3IsB,WAAW,CAAC,WAAW,CACvBC,SAAS,CAAE,EAAG,CACf,CAAC,cACFpJ,IAAA,WACEgI,OAAO,CAAEV,aAAc,CACvBkB,QAAQ,CAAEzF,UAAW,CACrB8E,SAAS,CAAC,+DAA+D,CAAAC,QAAA,cAEzE9H,IAAA,CAACb,IAAI,EAAC0I,SAAS,CAAC,SAAS,CAAE,CAAC,CACtB,CAAC,cACT7H,IAAA,WACEgI,OAAO,CAAER,eAAgB,CACzBgB,QAAQ,CAAEzF,UAAW,CACrB8E,SAAS,CAAC,6DAA6D,CAAAC,QAAA,cAEvE9H,IAAA,CAACZ,CAAC,EAACyI,SAAS,CAAC,SAAS,CAAE,CAAC,CACnB,CAAC,EACN,CAAC,cAEN3H,KAAA,QAAK2H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9H,IAAA,SAAM6H,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAE,CAAAtB,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEO,GAAG,GAAI,QAAQ,CAAO,CAAC,cACzF/G,IAAA,WACEgI,OAAO,CAAEZ,aAAc,CACvBoB,QAAQ,CAAEzF,UAAW,CACrB8E,SAAS,CAAC,2DAA2D,CAAAC,QAAA,cAErE9H,IAAA,CAACd,KAAK,EAAC2I,SAAS,CAAC,SAAS,CAAE,CAAC,CACvB,CAAC,EACN,CACN,EACE,CAAC,cAGN3H,KAAA,QAAK2H,SAAS,CAAC,iEAAiE,CAAAC,QAAA,eAC9E9H,IAAA,SAAM6H,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,WAAS,CAAM,CAAC,CACvDrF,kBAAkB,cACjBvC,KAAA,QAAK2H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C5H,KAAA,WACEqF,KAAK,CAAE5C,cAAe,CACtBsG,QAAQ,CAAGhB,CAAC,EAAKrF,iBAAiB,CAACqF,CAAC,CAACiB,MAAM,CAAC3D,KAAK,CAAE,CACnDsC,SAAS,CAAC,iIAAiI,CAAAC,QAAA,eAE3I9H,IAAA,WAAQuF,KAAK,CAAC,EAAE,CAAAuC,QAAA,CAAC,SAAO,CAAQ,CAAC,CAChCjF,cAAc,CAACwG,GAAG,CAAC,CAACrC,SAAS,CAAEsC,KAAK,gBACnCtJ,IAAA,WAAoBuF,KAAK,CAAEyB,SAAU,CAAAc,QAAA,CAClCd,SAAS,EADCsC,KAEL,CACT,CAAC,EACI,CAAC,cACTtJ,IAAA,WACEgI,OAAO,CAAEN,mBAAoB,CAC7Bc,QAAQ,CAAEzF,UAAW,CACrB8E,SAAS,CAAC,+DAA+D,CAAAC,QAAA,cAEzE9H,IAAA,CAACb,IAAI,EAAC0I,SAAS,CAAC,SAAS,CAAE,CAAC,CACtB,CAAC,cACT7H,IAAA,WACEgI,OAAO,CAAEJ,qBAAsB,CAC/BY,QAAQ,CAAEzF,UAAW,CACrB8E,SAAS,CAAC,6DAA6D,CAAAC,QAAA,cAEvE9H,IAAA,CAACZ,CAAC,EAACyI,SAAS,CAAC,SAAS,CAAE,CAAC,CACnB,CAAC,EACN,CAAC,cAEN3H,KAAA,QAAK2H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9H,IAAA,SAAM6H,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAE,CAAAtB,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEQ,SAAS,GAAI,SAAS,CAAO,CAAC,cAChGhH,IAAA,WACEgI,OAAO,CAAEP,mBAAoB,CAC7Be,QAAQ,CAAEzF,UAAW,CACrB8E,SAAS,CAAC,2DAA2D,CAAAC,QAAA,cAErE9H,IAAA,CAACd,KAAK,EAAC2I,SAAS,CAAC,SAAS,CAAE,CAAC,CACvB,CAAC,EACN,CACN,EACE,CAAC,cAGN3H,KAAA,QAAK2H,SAAS,CAAC,iEAAiE,CAAAC,QAAA,eAC9E9H,IAAA,SAAM6H,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,gBAAc,CAAM,CAAC,cAC7D5H,KAAA,QAAK2H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9H,IAAA,SAAM6H,SAAS,0CAAArC,MAAA,CACbgB,WAAW,SAAXA,WAAW,WAAXA,WAAW,CAAEE,WAAW,CAAG,cAAc,CAAG,gBAAgB,CAC3D,CAAAoB,QAAA,CACAtB,WAAW,SAAXA,WAAW,WAAXA,WAAW,CAAEE,WAAW,cACvBxG,KAAA,CAAAE,SAAA,EAAA0H,QAAA,eACE9H,IAAA,CAACnB,MAAM,EAACgJ,SAAS,CAAC,cAAc,CAAE,CAAC,MAErC,EAAE,CAAC,CAEH,IACD,CACG,CAAC,cACP7H,IAAA,WACEgI,OAAO,CAAEzB,qBAAsB,CAC/BiC,QAAQ,CAAEzF,UAAW,CACrB8E,SAAS,0KAAArC,MAAA,CACPgB,WAAW,SAAXA,WAAW,WAAXA,WAAW,CAAEE,WAAW,CAAG,YAAY,CAAG,aAAa,CACtD,CAAAoB,QAAA,cAEH9H,IAAA,SACE6H,SAAS,8EAAArC,MAAA,CACPgB,WAAW,SAAXA,WAAW,WAAXA,WAAW,CAAEE,WAAW,CAAG,eAAe,CAAG,eAAe,CAC3D,CACJ,CAAC,CACI,CAAC,EACN,CAAC,EACH,CAAC,cAGNxG,KAAA,QAAK2H,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrD9H,IAAA,SAAM6H,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,aAAW,CAAM,CAAC,cAC1D9H,IAAA,SAAM6H,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAClD,CAAAM,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEmB,UAAU,GAAI,IAAI,CAAGnB,OAAO,CAACmB,UAAU,CAAC9D,OAAO,CAAC,CAAC,CAAC,CAAG,QAAQ,CACnE,CAAC,EACJ,CAAC,EACH,CAAC,EACH,CAAC,cAGNvF,KAAA,QAAK2H,SAAS,CAAC,sDAAsD,CAAAC,QAAA,eACnE9H,IAAA,QAAK6H,SAAS,CAAC,oCAAoC,CAAAC,QAAA,cACjD9H,IAAA,OAAI6H,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAC,iBAAe,CAAI,CAAC,CACrE,CAAC,cACN9H,IAAA,QAAK6H,SAAS,CAAC,KAAK,CAAAC,QAAA,CACjBS,cAAc,EAAIA,cAAc,CAAC1D,MAAM,CAAG,CAAC,cAC1C7E,IAAA,QAAK6H,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvBS,cAAc,CAACc,GAAG,CAAC,CAACG,GAAG,CAAEF,KAAK,gBAC7BtJ,IAAA,QAA2B6H,SAAS,CAAC,sDAAsD,CAAAC,QAAA,cACzF5H,KAAA,QAAK2H,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD5H,KAAA,QAAA4H,QAAA,eACE9H,IAAA,MAAG6H,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAE0B,GAAG,CAAC3C,QAAQ,CAAI,CAAC,cAC1E7G,IAAA,MAAG6H,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,aAAW,CAAG,CAAC,EACjD,CAAC,cACN5H,KAAA,QAAK2H,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzB9H,IAAA,MAAG6H,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAE7D,cAAc,CAACuF,GAAG,CAACtF,MAAM,CAAC,CAAI,CAAC,cAC/ElE,IAAA,MAAG6H,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,WAAS,CAAG,CAAC,EAC/C,CAAC,EACH,CAAC,EAVE0B,GAAG,CAACC,EAAE,EAAIH,KAWf,CACN,CAAC,CACC,CAAC,cAENpJ,KAAA,QAAK2H,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC9H,IAAA,CAACxB,QAAQ,EAACqJ,SAAS,CAAC,sCAAsC,CAAE,CAAC,cAC7D7H,IAAA,MAAG6H,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,oBAAkB,CAAG,CAAC,cAChE9H,IAAA,MAAG6H,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,4CAAwC,CAAG,CAAC,EAC9E,CACN,CACE,CAAC,EACH,CAAC,EACH,CAAC,cAGN5H,KAAA,QAAK2H,SAAS,CAAC,sEAAsE,CAAAC,QAAA,eACnF9H,IAAA,QAAK6H,SAAS,CAAC,oCAAoC,CAAAC,QAAA,cACjD5H,KAAA,QAAK2H,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD9H,IAAA,OAAI6H,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAC,eAAa,CAAI,CAAC,cACtE5H,KAAA,QAAK2H,SAAS,CAAC,mDAAmD,CAAAC,QAAA,eAChE5H,KAAA,QAAK2H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9H,IAAA,QAAK6H,SAAS,CAAC,uCAAuC,CAAM,CAAC,cAC7D7H,IAAA,SAAA8H,QAAA,CAAM,QAAM,CAAM,CAAC,EAChB,CAAC,cACN5H,KAAA,QAAK2H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9H,IAAA,QAAK6H,SAAS,CAAC,sCAAsC,CAAM,CAAC,cAC5D7H,IAAA,SAAA8H,QAAA,CAAM,MAAI,CAAM,CAAC,EACd,CAAC,cACN5H,KAAA,QAAK2H,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1C9H,IAAA,QAAK6H,SAAS,CAAC,qCAAqC,CAAM,CAAC,cAC3D7H,IAAA,SAAA8H,QAAA,CAAM,MAAI,CAAM,CAAC,EACd,CAAC,EACH,CAAC,EACH,CAAC,CACH,CAAC,cACN9H,IAAA,QAAK6H,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAC7BQ,KAAK,EAAIA,KAAK,CAACzD,MAAM,CAAG,CAAC,cACxB3E,KAAA,UAAO2H,SAAS,CAAC,qCAAqC,CAAAC,QAAA,eACpD9H,IAAA,UAAO6H,SAAS,CAAC,YAAY,CAAAC,QAAA,cAC3B5H,KAAA,OAAA4H,QAAA,eACE9H,IAAA,OAAI6H,SAAS,CAAC,kFAAkF,CAAAC,QAAA,CAAC,MAEjG,CAAI,CAAC,cACL9H,IAAA,OAAI6H,SAAS,CAAC,oFAAoF,CAAAC,QAAA,CAAC,MAEnG,CAAI,CAAC,cACL9H,IAAA,OAAI6H,SAAS,CAAC,mFAAmF,CAAAC,QAAA,CAAC,QAElG,CAAI,CAAC,cACL9H,IAAA,OAAI6H,SAAS,CAAC,mFAAmF,CAAAC,QAAA,CAAC,OAElG,CAAI,CAAC,cACL9H,IAAA,OAAI6H,SAAS,CAAC,mFAAmF,CAAAC,QAAA,CAAC,KAElG,CAAI,CAAC,cACL9H,IAAA,OAAI6H,SAAS,CAAC,mFAAmF,CAAAC,QAAA,CAAC,OAElG,CAAI,CAAC,cACL9H,IAAA,OAAI6H,SAAS,CAAC,oFAAoF,CAAAC,QAAA,CAAC,QAEnG,CAAI,CAAC,EACH,CAAC,CACA,CAAC,cACR9H,IAAA,UAAO6H,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CACjDQ,KAAK,CAACe,GAAG,CAAC,CAACvD,IAAI,CAAEwD,KAAK,gBACrBtJ,IAAA,CAACF,QAAQ,EAEPgG,IAAI,CAAEA,IAAK,CACXwD,KAAK,CAAEA,KAAM,CACbrF,cAAc,CAAEA,cAAe,CAC/BQ,UAAU,CAAEA,UAAW,CACvBa,gBAAgB,CAAEA,gBAAiB,CACnCoE,QAAQ,CAAE7D,uBAAwB,EAN7ByD,KAON,CACF,CAAC,CACG,CAAC,EACH,CAAC,cAERpJ,KAAA,QAAK2H,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC9H,IAAA,CAACrB,QAAQ,EAACkJ,SAAS,CAAC,sCAAsC,CAAE,CAAC,cAC7D7H,IAAA,MAAG6H,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,4BAA0B,CAAG,CAAC,cACxE9H,IAAA,MAAG6H,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,0CAAwC,CAAG,CAAC,EAC9E,CACN,CACE,CAAC,EACH,CAAC,EACH,CAAC,cAGN9H,IAAA,CAACL,eAAe,EACdgK,MAAM,CAAExI,mBAAoB,CAC5B4G,OAAO,CAAEA,CAAA,GAAM3G,sBAAsB,CAAC,KAAK,CAAE,CAC7CZ,IAAI,CAAEA,IAAK,CACXC,MAAM,CAAEA,MAAO,CACfmJ,SAAS,CAAElE,aAAc,CAC1B,CAAC,cACF1F,IAAA,CAACH,mBAAmB,EAClB8J,MAAM,CAAEtI,uBAAwB,CAChC0G,OAAO,CAAEA,CAAA,GAAMzG,0BAA0B,CAAC,KAAK,CAAE,CACjDd,IAAI,CAAEA,IAAK,CACXC,MAAM,CAAEA,MAAO,CACfmJ,SAAS,CAAElE,aAAc,CAC1B,CAAC,cACF1F,IAAA,CAACJ,OAAO,EACN+J,MAAM,CAAEpI,WAAY,CACpBwG,OAAO,CAAEA,CAAA,GAAMvG,cAAc,CAAC,KAAK,CAAE,CACrChB,IAAI,CAAEA,IAAK,CACXC,MAAM,CAAEA,MAAO,CACfmJ,SAAS,CAAElE,aAAc,CAC1B,CAAC,CAGD7D,gBAAgB,eACf7B,IAAA,QAAK6H,SAAS,CAAC,qEAAqE,CAAAC,QAAA,cAClF9H,IAAA,QAAK6H,SAAS,CAAC,+CAA+C,CAAAC,QAAA,cAC5D5H,KAAA,QAAK2H,SAAS,CAAC,KAAK,CAAAC,QAAA,eAElB9H,IAAA,QAAK6H,SAAS,CAAC,uCAAuC,CAAAC,QAAA,cACpD9H,IAAA,QAAK6H,SAAS,CAAC,4BAA4B,CAAAC,QAAA,cACzC9H,IAAA,QAAK6H,SAAS,CAAC,sBAAsB,CAACgC,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAjC,QAAA,cACzF9H,IAAA,SAAMgK,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACC,CAAC,CAAC,2IAA2I,CAAE,CAAC,CAChN,CAAC,CACH,CAAC,CACH,CAAC,cAGNnK,IAAA,OAAI6H,SAAS,CAAC,sDAAsD,CAAAC,QAAA,CAAC,oBAAkB,CAAI,CAAC,CAG3F/F,mBAAmB,eAClB7B,KAAA,QAAK2H,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnB9H,IAAA,MAAG6H,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,mDAAiD,CAAG,CAAC,cAC3G5H,KAAA,QAAK2H,SAAS,CAAC,6CAA6C,CAAAC,QAAA,eAC1D5H,KAAA,QAAK2H,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnC9H,IAAA,SAAM6H,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,OAAK,CAAM,CAAC,cAC5C9H,IAAA,SAAM6H,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAErD,UAAU,CAAC1C,mBAAmB,CAACkD,IAAI,CAAC,CAAO,CAAC,EACtF,CAAC,cACN/E,KAAA,QAAK2H,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnC9H,IAAA,SAAM6H,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,SAAO,CAAM,CAAC,cAC9C9H,IAAA,SAAM6H,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAE7D,cAAc,CAAClC,mBAAmB,CAACmC,MAAM,CAAC,CAAO,CAAC,EAC5F,CAAC,cACNhE,KAAA,QAAK2H,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnC9H,IAAA,SAAM6H,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,QAAM,CAAM,CAAC,cAC7C9H,IAAA,SAAM6H,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAE,EAAAvH,qBAAA,CAAAwB,mBAAmB,CAACuG,KAAK,UAAA/H,qBAAA,iBAAzBA,qBAAA,CAA2BkF,OAAO,CAAC,CAAC,CAAC,GAAI,QAAQ,CAAO,CAAC,EACnG,CAAC,EACH,CAAC,cACNzF,IAAA,MAAG6H,SAAS,CAAC,mDAAmD,CAAAC,QAAA,CAAC,+BAA6B,CAAG,CAAC,EAC/F,CACN,CAGA3F,WAAW,eACVnC,IAAA,QAAK6H,SAAS,CAAC,qDAAqD,CAAAC,QAAA,cAClE5H,KAAA,QAAK2H,SAAS,CAAC,4BAA4B,CAAAC,QAAA,eACzC9H,IAAA,QAAK6H,SAAS,CAAC,2CAA2C,CAACkC,OAAO,CAAC,WAAW,CAACF,IAAI,CAAC,cAAc,CAAA/B,QAAA,cAChG9H,IAAA,SAAMoK,QAAQ,CAAC,SAAS,CAACD,CAAC,CAAC,yNAAyN,CAACE,QAAQ,CAAC,SAAS,CAAE,CAAC,CACvQ,CAAC,cACNnK,KAAA,QAAK2H,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrB9H,IAAA,MAAG6H,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAE3F,WAAW,CAAI,CAAC,CACpDA,WAAW,CAACwF,QAAQ,CAAC,sBAAsB,CAAC,eAC3C3H,IAAA,MAAG6H,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAC,+CAA6C,CAAG,CAC1F,EACE,CAAC,cACN9H,IAAA,WAAQgI,OAAO,CAAEA,CAAA,GAAM5F,cAAc,CAAC,IAAI,CAAE,CAACyF,SAAS,CAAC,iCAAiC,CAAAC,QAAA,cACtF9H,IAAA,CAACZ,CAAC,EAACyI,SAAS,CAAC,SAAS,CAAE,CAAC,CACnB,CAAC,EACN,CAAC,CACH,CACN,cAGD3H,KAAA,QAAK2H,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B9H,IAAA,WACEgI,OAAO,CAAE1B,uBAAwB,CACjCkC,QAAQ,CAAEvG,UAAW,CACrB4F,SAAS,CAAC,qIAAqI,CAAAC,QAAA,CAChJ,QAED,CAAQ,CAAC,cACT9H,IAAA,WACEgI,OAAO,CAAEhC,wBAAyB,CAClCwC,QAAQ,CAAEvG,UAAW,CACrB4F,SAAS,CAAC,iKAAiK,CAAAC,QAAA,CAE1K7F,UAAU,cACT/B,KAAA,CAAAE,SAAA,EAAA0H,QAAA,eACE5H,KAAA,QAAK2H,SAAS,CAAC,iCAAiC,CAACgC,IAAI,CAAC,MAAM,CAACE,OAAO,CAAC,WAAW,CAAAjC,QAAA,eAC9E9H,IAAA,WAAQ6H,SAAS,CAAC,YAAY,CAACyC,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,IAAI,CAACC,CAAC,CAAC,IAAI,CAACV,MAAM,CAAC,cAAc,CAACI,WAAW,CAAC,GAAG,CAAS,CAAC,cACrGlK,IAAA,SAAM6H,SAAS,CAAC,YAAY,CAACgC,IAAI,CAAC,cAAc,CAACM,CAAC,CAAC,iHAAiH,CAAO,CAAC,EACzK,CAAC,cAER,EAAE,CAAC,CAEH,QACD,CACK,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,CACH,CACN,CAGAlH,qBAAqB,eACpBjD,IAAA,CAACR,eAAe,EACdiB,MAAM,CAAEA,MAAO,CACfmG,MAAM,CAAEpG,IAAI,CAACmD,UAAU,EAAInD,IAAI,CAACoG,MAAO,CACvC6D,KAAK,kBAAAjF,MAAA,CAAmBhF,IAAI,CAACsG,UAAU,EAAItG,IAAI,CAACkK,IAAI,CAAG,CACvD3C,OAAO,CAAEA,CAAA,GAAM7E,wBAAwB,CAAC,KAAK,CAAE,CAC/CyH,SAAS,CAAEtL,WAAW,CAACuL,uBAAwB,CAChD,CACF,CAGAzH,oBAAoB,eACnBnD,IAAA,CAACT,iBAAiB,EAChBkB,MAAM,CAAEA,MAAO,CACfmG,MAAM,CAAEpG,IAAI,CAACmD,UAAU,EAAInD,IAAI,CAACoG,MAAO,CACvC6D,KAAK,wBAAAjF,MAAA,CAAyBhF,IAAI,CAACsG,UAAU,EAAItG,IAAI,CAACkK,IAAI,CAAG,CAC7D3C,OAAO,CAAEA,CAAA,GAAM3E,uBAAuB,CAAC,KAAK,CAAE,CAC9CuH,SAAS,CAAEtL,WAAW,CAACwL,0BAA2B,CACnD,CACF,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAxK,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}