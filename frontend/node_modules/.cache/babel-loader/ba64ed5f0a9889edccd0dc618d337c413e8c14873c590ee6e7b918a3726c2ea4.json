{"ast":null,"code":"import _objectSpread from\"/Users/srejanbera/Workspace/Stonks/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{userAPI}from'../../services/api.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{let{onLogin,onSwitchToSignup}=_ref;const[formData,setFormData]=useState({loginId:'',password:''});const[errors,setErrors]=useState({});const[isLoading,setIsLoading]=useState(false);const[successMessage,setSuccessMessage]=useState('');useEffect(()=>{// Check if user was redirected from signup\nconst urlParams=new URLSearchParams(window.location.search);const fromSignup=urlParams.get('fromSignup');if(fromSignup==='true'){setSuccessMessage('Account created successfully! Please login with your credentials.');// Clean up URL\nwindow.history.replaceState({},document.title,window.location.pathname);}},[]);const validateForm=()=>{const newErrors={};if(!formData.loginId.trim()){newErrors.loginId='Login ID is required';}if(!formData.password.trim()){newErrors.password='Password is required';}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm())return;try{setIsLoading(true);setErrors({});const response=await userAPI.login(formData);if(response){onLogin(response);}else{setErrors({general:'Invalid login credentials'});}}catch(error){console.error('Login error:',error);setErrors({general:'Login failed. Please try again.'});}finally{setIsLoading(false);}};const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));// Clear error when user starts typing\nif(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:''}));}// Clear success message when user starts typing\nif(successMessage){setSuccessMessage('');}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white\",children:\"Sign in to your account\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 text-center text-sm text-gray-600 dark:text-gray-400\",children:[\"Or\",' ',/*#__PURE__*/_jsx(\"button\",{onClick:onSwitchToSignup,className:\"font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300\",children:\"create a new account\"})]})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"mt-8 space-y-6\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-md shadow-sm -space-y-px\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"loginId\",className:\"sr-only\",children:\"Login ID\"}),/*#__PURE__*/_jsx(\"input\",{id:\"loginId\",name:\"loginId\",type:\"text\",required:true,className:\"appearance-none rounded-none relative block w-full px-3 py-2 border \".concat(errors.loginId?'border-red-300 dark:border-red-500':'border-gray-300 dark:border-gray-600',\" placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-800 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm\"),placeholder:\"Login ID\",value:formData.loginId,onChange:handleChange,disabled:isLoading}),errors.loginId&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.loginId})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"sr-only\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",name:\"password\",type:\"password\",required:true,className:\"appearance-none rounded-none relative block w-full px-3 py-2 border \".concat(errors.password?'border-red-300 dark:border-red-500':'border-gray-300 dark:border-gray-600',\" placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-800 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm\"),placeholder:\"Password\",value:formData.password,onChange:handleChange,disabled:isLoading}),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.password})]})]}),successMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"rounded-md bg-green-50 dark:bg-green-900/20 p-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-green-700 dark:text-green-400\",children:successMessage})}),errors.general&&/*#__PURE__*/_jsx(\"div\",{className:\"rounded-md bg-red-50 dark:bg-red-900/20 p-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-red-700 dark:text-red-400\",children:errors.general})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,className:\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:isLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"}),\"Signing in...\"]}):'Sign in'})})]})]})});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","userAPI","jsx","_jsx","jsxs","_jsxs","Login","_ref","onLogin","onSwitchToSignup","formData","setFormData","loginId","password","errors","setErrors","isLoading","setIsLoading","successMessage","setSuccessMessage","urlParams","URLSearchParams","window","location","search","fromSignup","get","history","replaceState","document","title","pathname","validateForm","newErrors","trim","Object","keys","length","handleSubmit","e","preventDefault","response","login","general","error","console","handleChange","name","value","target","prev","_objectSpread","className","children","onClick","onSubmit","htmlFor","id","type","required","concat","placeholder","onChange","disabled"],"sources":["/Users/srejanbera/Workspace/Stonks/frontend/src/components/Auth/Login.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { userAPI } from '../../services/api.js';\n\nconst Login = ({ onLogin, onSwitchToSignup }) => {\n  const [formData, setFormData] = useState({\n    loginId: '',\n    password: ''\n  });\n  const [errors, setErrors] = useState({});\n  const [isLoading, setIsLoading] = useState(false);\n  const [successMessage, setSuccessMessage] = useState('');\n\n  useEffect(() => {\n    // Check if user was redirected from signup\n    const urlParams = new URLSearchParams(window.location.search);\n    const fromSignup = urlParams.get('fromSignup');\n    if (fromSignup === 'true') {\n      setSuccessMessage('Account created successfully! Please login with your credentials.');\n      // Clean up URL\n      window.history.replaceState({}, document.title, window.location.pathname);\n    }\n  }, []);\n\n  const validateForm = () => {\n    const newErrors = {};\n\n    if (!formData.loginId.trim()) {\n      newErrors.loginId = 'Login ID is required';\n    }\n\n    if (!formData.password.trim()) {\n      newErrors.password = 'Password is required';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!validateForm()) return;\n\n    try {\n      setIsLoading(true);\n      setErrors({});\n      \n      const response = await userAPI.login(formData);\n      \n      if (response) {\n        onLogin(response);\n      } else {\n        setErrors({ general: 'Invalid login credentials' });\n      }\n    } catch (error) {\n      console.error('Login error:', error);\n      setErrors({ general: 'Login failed. Please try again.' });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    \n    // Clear error when user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n    \n    // Clear success message when user starts typing\n    if (successMessage) {\n      setSuccessMessage('');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-md w-full space-y-8\">\n        <div>\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white\">\n            Sign in to your account\n          </h2>\n          <p className=\"mt-2 text-center text-sm text-gray-600 dark:text-gray-400\">\n            Or{' '}\n            <button\n              onClick={onSwitchToSignup}\n              className=\"font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300\"\n            >\n              create a new account\n            </button>\n          </p>\n        </div>\n        \n        <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\n          <div className=\"rounded-md shadow-sm -space-y-px\">\n            <div>\n              <label htmlFor=\"loginId\" className=\"sr-only\">\n                Login ID\n              </label>\n              <input\n                id=\"loginId\"\n                name=\"loginId\"\n                type=\"text\"\n                required\n                className={`appearance-none rounded-none relative block w-full px-3 py-2 border ${\n                  errors.loginId ? 'border-red-300 dark:border-red-500' : 'border-gray-300 dark:border-gray-600'\n                } placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-800 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm`}\n                placeholder=\"Login ID\"\n                value={formData.loginId}\n                onChange={handleChange}\n                disabled={isLoading}\n              />\n              {errors.loginId && (\n                <p className=\"mt-1 text-sm text-red-600\">{errors.loginId}</p>\n              )}\n            </div>\n            <div>\n              <label htmlFor=\"password\" className=\"sr-only\">\n                Password\n              </label>\n              <input\n                id=\"password\"\n                name=\"password\"\n                type=\"password\"\n                required\n                className={`appearance-none rounded-none relative block w-full px-3 py-2 border ${\n                  errors.password ? 'border-red-300 dark:border-red-500' : 'border-gray-300 dark:border-gray-600'\n                } placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-800 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm`}\n                placeholder=\"Password\"\n                value={formData.password}\n                onChange={handleChange}\n                disabled={isLoading}\n              />\n              {errors.password && (\n                <p className=\"mt-1 text-sm text-red-600\">{errors.password}</p>\n              )}\n            </div>\n          </div>\n\n          {successMessage && (\n            <div className=\"rounded-md bg-green-50 dark:bg-green-900/20 p-4\">\n              <div className=\"text-sm text-green-700 dark:text-green-400\">{successMessage}</div>\n            </div>\n          )}\n\n          {errors.general && (\n            <div className=\"rounded-md bg-red-50 dark:bg-red-900/20 p-4\">\n              <div className=\"text-sm text-red-700 dark:text-red-400\">{errors.general}</div>\n            </div>\n          )}\n\n          <div>\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isLoading ? (\n                <div className=\"flex items-center\">\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                  Signing in...\n                </div>\n              ) : (\n                'Sign in'\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}