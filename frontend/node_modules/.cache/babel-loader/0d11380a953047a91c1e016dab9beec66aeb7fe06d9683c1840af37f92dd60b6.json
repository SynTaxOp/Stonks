{"ast":null,"code":"import React,{useState,useRef}from'react';import{Search,X}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FundSearch=_ref=>{let{onSearch}=_ref;const[searchText,setSearchText]=useState('');const[isSearching,setIsSearching]=useState(false);const[lastSearchedText,setLastSearchedText]=useState('');const searchTimeoutRef=useRef(null);// Only search when text has actually changed and user stops typing\nconst handleSearch=async text=>{if(text.trim()===lastSearchedText){return;// Don't search if text hasn't changed\n}if(text.trim().length<2){setLastSearchedText('');onSearch('');return;}try{setIsSearching(true);await onSearch(text);setLastSearchedText(text);}catch(error){console.error('Search error:',error);}finally{setIsSearching(false);}};// Debounced search - only search when text changes and user stops typing\nconst handleTextChange=value=>{setSearchText(value);if(searchTimeoutRef.current){clearTimeout(searchTimeoutRef.current);}if(value.trim()){searchTimeoutRef.current=setTimeout(()=>{handleSearch(value);},800);// Increased delay to 800ms for better UX\n}else{setLastSearchedText('');onSearch('');}};const handleClear=()=>{setSearchText('');setLastSearchedText('');onSearch('');if(searchTimeoutRef.current){clearTimeout(searchTimeoutRef.current);}};// Cleanup timeout on unmount\nReact.useEffect(()=>{return()=>{if(searchTimeoutRef.current){clearTimeout(searchTimeoutRef.current);}};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(Search,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchText,onChange:e=>handleTextChange(e.target.value),placeholder:\"Search for mutual funds...\",className:\"block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 text-gray-900 focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"}),searchText&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 right-0 pr-3 flex items-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleClear,className:\"text-gray-400 hover:text-gray-600 focus:outline-none\",children:/*#__PURE__*/_jsx(X,{className:\"h-5 w-5\"})})}),isSearching&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 right-0 pr-3 flex items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600\"})})]}),searchText&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-600\",children:isSearching?'Searching...':'Type to search for mutual funds'})]});};export default FundSearch;","map":{"version":3,"names":["React","useState","useRef","Search","X","jsx","_jsx","jsxs","_jsxs","FundSearch","_ref","onSearch","searchText","setSearchText","isSearching","setIsSearching","lastSearchedText","setLastSearchedText","searchTimeoutRef","handleSearch","text","trim","length","error","console","handleTextChange","value","current","clearTimeout","setTimeout","handleClear","useEffect","className","children","type","onChange","e","target","placeholder","onClick"],"sources":["/Users/srejanbera/Workspace/Stonks/frontend/src/components/Dashboard/FundSearch.jsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { Search, X } from 'lucide-react';\n\nconst FundSearch = ({ onSearch }) => {\n  const [searchText, setSearchText] = useState('');\n  const [isSearching, setIsSearching] = useState(false);\n  const [lastSearchedText, setLastSearchedText] = useState('');\n  const searchTimeoutRef = useRef(null);\n\n  // Only search when text has actually changed and user stops typing\n  const handleSearch = async (text) => {\n    if (text.trim() === lastSearchedText) {\n      return; // Don't search if text hasn't changed\n    }\n\n    if (text.trim().length < 2) {\n      setLastSearchedText('');\n      onSearch('');\n      return;\n    }\n\n    try {\n      setIsSearching(true);\n      await onSearch(text);\n      setLastSearchedText(text);\n    } catch (error) {\n      console.error('Search error:', error);\n    } finally {\n      setIsSearching(false);\n    }\n  };\n\n  // Debounced search - only search when text changes and user stops typing\n  const handleTextChange = (value) => {\n    setSearchText(value);\n    \n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current);\n    }\n\n    if (value.trim()) {\n      searchTimeoutRef.current = setTimeout(() => {\n        handleSearch(value);\n      }, 800); // Increased delay to 800ms for better UX\n    } else {\n      setLastSearchedText('');\n      onSearch('');\n    }\n  };\n\n  const handleClear = () => {\n    setSearchText('');\n    setLastSearchedText('');\n    onSearch('');\n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current);\n    }\n  };\n\n  // Cleanup timeout on unmount\n  React.useEffect(() => {\n    return () => {\n      if (searchTimeoutRef.current) {\n        clearTimeout(searchTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  return (\n    <div className=\"relative\">\n      <div className=\"relative\">\n        <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n          <Search className=\"h-5 w-5 text-gray-400\" />\n        </div>\n        <input\n          type=\"text\"\n          value={searchText}\n          onChange={(e) => handleTextChange(e.target.value)}\n          placeholder=\"Search for mutual funds...\"\n          className=\"block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 text-gray-900 focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\n        />\n        {searchText && (\n          <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center\">\n            <button\n              onClick={handleClear}\n              className=\"text-gray-400 hover:text-gray-600 focus:outline-none\"\n            >\n              <X className=\"h-5 w-5\" />\n            </button>\n          </div>\n        )}\n        {isSearching && (\n          <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center\">\n            <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600\"></div>\n          </div>\n        )}\n      </div>\n      {searchText && (\n        <p className=\"mt-2 text-sm text-gray-600\">\n          {isSearching ? 'Searching...' : 'Type to search for mutual funds'}\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default FundSearch;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}